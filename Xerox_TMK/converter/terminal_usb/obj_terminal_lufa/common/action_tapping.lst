   1               		.file	"action_tapping.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   7               		.text
   8               	.Ltext0:
   9               		.cfi_sections	.debug_frame
  10               		.section	.text.debug_waiting_buffer,"ax",@progbits
  12               	debug_waiting_buffer:
  13               	.LFB11:
  14               		.file 1 "../../tmk_core/common/action_tapping.c"
   1:../../tmk_core/common/action_tapping.c **** #include <stdint.h>
   2:../../tmk_core/common/action_tapping.c **** #include <stdbool.h>
   3:../../tmk_core/common/action_tapping.c **** #include "action.h"
   4:../../tmk_core/common/action_tapping.c **** #include "action_layer.h"
   5:../../tmk_core/common/action_tapping.c **** #include "action_tapping.h"
   6:../../tmk_core/common/action_tapping.c **** #include "keycode.h"
   7:../../tmk_core/common/action_tapping.c **** #include "timer.h"
   8:../../tmk_core/common/action_tapping.c **** 
   9:../../tmk_core/common/action_tapping.c **** #ifdef DEBUG_ACTION
  10:../../tmk_core/common/action_tapping.c **** #include "debug.h"
  11:../../tmk_core/common/action_tapping.c **** #else
  12:../../tmk_core/common/action_tapping.c **** #include "nodebug.h"
  13:../../tmk_core/common/action_tapping.c **** #endif
  14:../../tmk_core/common/action_tapping.c **** 
  15:../../tmk_core/common/action_tapping.c **** #ifndef NO_ACTION_TAPPING
  16:../../tmk_core/common/action_tapping.c **** 
  17:../../tmk_core/common/action_tapping.c **** #define IS_TAPPING()            !IS_NOEVENT(tapping_key.event)
  18:../../tmk_core/common/action_tapping.c **** #define IS_TAPPING_PRESSED()    (IS_TAPPING() && tapping_key.event.pressed)
  19:../../tmk_core/common/action_tapping.c **** #define IS_TAPPING_RELEASED()   (IS_TAPPING() && !tapping_key.event.pressed)
  20:../../tmk_core/common/action_tapping.c **** #define IS_TAPPING_KEY(k)       (IS_TAPPING() && KEYEQ(tapping_key.event.key, (k)))
  21:../../tmk_core/common/action_tapping.c **** #define WITHIN_TAPPING_TERM(e)  (TIMER_DIFF_16(e.time, tapping_key.event.time) < TAPPING_TERM)
  22:../../tmk_core/common/action_tapping.c **** 
  23:../../tmk_core/common/action_tapping.c **** 
  24:../../tmk_core/common/action_tapping.c **** static keyrecord_t tapping_key = {};
  25:../../tmk_core/common/action_tapping.c **** static keyrecord_t waiting_buffer[WAITING_BUFFER_SIZE] = {};
  26:../../tmk_core/common/action_tapping.c **** static uint8_t waiting_buffer_head = 0;
  27:../../tmk_core/common/action_tapping.c **** static uint8_t waiting_buffer_tail = 0;
  28:../../tmk_core/common/action_tapping.c **** 
  29:../../tmk_core/common/action_tapping.c **** static bool process_tapping(keyrecord_t *record);
  30:../../tmk_core/common/action_tapping.c **** static bool waiting_buffer_enq(keyrecord_t record);
  31:../../tmk_core/common/action_tapping.c **** static void waiting_buffer_clear(void);
  32:../../tmk_core/common/action_tapping.c **** static bool waiting_buffer_typed(keyevent_t event);
  33:../../tmk_core/common/action_tapping.c **** static void waiting_buffer_scan_tap(void);
  34:../../tmk_core/common/action_tapping.c **** static void debug_tapping_key(void);
  35:../../tmk_core/common/action_tapping.c **** static void debug_waiting_buffer(void);
  36:../../tmk_core/common/action_tapping.c **** 
  37:../../tmk_core/common/action_tapping.c **** 
  38:../../tmk_core/common/action_tapping.c **** void action_tapping_process(keyrecord_t record)
  39:../../tmk_core/common/action_tapping.c **** {
  40:../../tmk_core/common/action_tapping.c ****     if (process_tapping(&record)) {
  41:../../tmk_core/common/action_tapping.c ****         if (!IS_NOEVENT(record.event)) {
  42:../../tmk_core/common/action_tapping.c ****             debug("processed: "); debug_record(record); debug("\n");
  43:../../tmk_core/common/action_tapping.c ****         }
  44:../../tmk_core/common/action_tapping.c ****     } else {
  45:../../tmk_core/common/action_tapping.c ****         if (!waiting_buffer_enq(record)) {
  46:../../tmk_core/common/action_tapping.c ****             // clear all in case of overflow.
  47:../../tmk_core/common/action_tapping.c ****             debug("OVERFLOW: CLEAR ALL STATES\n");
  48:../../tmk_core/common/action_tapping.c ****             clear_keyboard();
  49:../../tmk_core/common/action_tapping.c ****             waiting_buffer_clear();
  50:../../tmk_core/common/action_tapping.c ****             tapping_key = (keyrecord_t){};
  51:../../tmk_core/common/action_tapping.c ****         }
  52:../../tmk_core/common/action_tapping.c ****     }
  53:../../tmk_core/common/action_tapping.c **** 
  54:../../tmk_core/common/action_tapping.c ****     // process waiting_buffer
  55:../../tmk_core/common/action_tapping.c ****     if (!IS_NOEVENT(record.event) && waiting_buffer_head != waiting_buffer_tail) {
  56:../../tmk_core/common/action_tapping.c ****         debug("---- action_exec: process waiting_buffer -----\n");
  57:../../tmk_core/common/action_tapping.c ****     }
  58:../../tmk_core/common/action_tapping.c ****     for (; waiting_buffer_tail != waiting_buffer_head; waiting_buffer_tail = (waiting_buffer_tail +
  59:../../tmk_core/common/action_tapping.c ****         if (process_tapping(&waiting_buffer[waiting_buffer_tail])) {
  60:../../tmk_core/common/action_tapping.c ****             debug("processed: waiting_buffer["); debug_dec(waiting_buffer_tail); debug("] = ");
  61:../../tmk_core/common/action_tapping.c ****             debug_record(waiting_buffer[waiting_buffer_tail]); debug("\n\n");
  62:../../tmk_core/common/action_tapping.c ****         } else {
  63:../../tmk_core/common/action_tapping.c ****             break;
  64:../../tmk_core/common/action_tapping.c ****         }
  65:../../tmk_core/common/action_tapping.c ****     }
  66:../../tmk_core/common/action_tapping.c ****     if (!IS_NOEVENT(record.event)) {
  67:../../tmk_core/common/action_tapping.c ****         debug("\n");
  68:../../tmk_core/common/action_tapping.c ****     }
  69:../../tmk_core/common/action_tapping.c **** }
  70:../../tmk_core/common/action_tapping.c **** 
  71:../../tmk_core/common/action_tapping.c **** 
  72:../../tmk_core/common/action_tapping.c **** /* Tapping
  73:../../tmk_core/common/action_tapping.c ****  *
  74:../../tmk_core/common/action_tapping.c ****  * Rule: Tap key is typed(pressed and released) within TAPPING_TERM.
  75:../../tmk_core/common/action_tapping.c ****  *       (without interfering by typing other key)
  76:../../tmk_core/common/action_tapping.c ****  */
  77:../../tmk_core/common/action_tapping.c **** /* return true when key event is processed or consumed. */
  78:../../tmk_core/common/action_tapping.c **** bool process_tapping(keyrecord_t *keyp)
  79:../../tmk_core/common/action_tapping.c **** {
  80:../../tmk_core/common/action_tapping.c ****     keyevent_t event = keyp->event;
  81:../../tmk_core/common/action_tapping.c **** 
  82:../../tmk_core/common/action_tapping.c ****     // if tapping
  83:../../tmk_core/common/action_tapping.c ****     if (IS_TAPPING_PRESSED()) {
  84:../../tmk_core/common/action_tapping.c ****         if (WITHIN_TAPPING_TERM(event)) {
  85:../../tmk_core/common/action_tapping.c ****             if (tapping_key.tap.count == 0) {
  86:../../tmk_core/common/action_tapping.c ****                 if (IS_TAPPING_KEY(event.key) && !event.pressed) {
  87:../../tmk_core/common/action_tapping.c ****                     // first tap!
  88:../../tmk_core/common/action_tapping.c ****                     debug("Tapping: First tap(0->1).\n");
  89:../../tmk_core/common/action_tapping.c ****                     tapping_key.tap.count = 1;
  90:../../tmk_core/common/action_tapping.c ****                     debug_tapping_key();
  91:../../tmk_core/common/action_tapping.c ****                     process_action(&tapping_key);
  92:../../tmk_core/common/action_tapping.c **** 
  93:../../tmk_core/common/action_tapping.c ****                     // copy tapping state
  94:../../tmk_core/common/action_tapping.c ****                     keyp->tap = tapping_key.tap;
  95:../../tmk_core/common/action_tapping.c ****                     // enqueue
  96:../../tmk_core/common/action_tapping.c ****                     return false;
  97:../../tmk_core/common/action_tapping.c ****                 }
  98:../../tmk_core/common/action_tapping.c **** #if TAPPING_TERM >= 500
  99:../../tmk_core/common/action_tapping.c ****                 /* Process a key typed within TAPPING_TERM
 100:../../tmk_core/common/action_tapping.c ****                  * This can register the key before settlement of tapping,
 101:../../tmk_core/common/action_tapping.c ****                  * useful for long TAPPING_TERM but may prevent fast typing.
 102:../../tmk_core/common/action_tapping.c ****                  */
 103:../../tmk_core/common/action_tapping.c ****                 else if (IS_RELEASED(event) && waiting_buffer_typed(event)) {
 104:../../tmk_core/common/action_tapping.c ****                     debug("Tapping: End. No tap. Interfered by typing key\n");
 105:../../tmk_core/common/action_tapping.c ****                     process_action(&tapping_key);
 106:../../tmk_core/common/action_tapping.c ****                     tapping_key = (keyrecord_t){};
 107:../../tmk_core/common/action_tapping.c ****                     debug_tapping_key();
 108:../../tmk_core/common/action_tapping.c ****                     // enqueue
 109:../../tmk_core/common/action_tapping.c ****                     return false;
 110:../../tmk_core/common/action_tapping.c ****                 }
 111:../../tmk_core/common/action_tapping.c **** #endif
 112:../../tmk_core/common/action_tapping.c ****                 /* Process release event of a key pressed before tapping starts
 113:../../tmk_core/common/action_tapping.c ****                  * Without this unexpected repeating will occur with having fast repeating setting
 114:../../tmk_core/common/action_tapping.c ****                  * https://github.com/tmk/tmk_keyboard/issues/60
 115:../../tmk_core/common/action_tapping.c ****                  */
 116:../../tmk_core/common/action_tapping.c ****                 else if (IS_RELEASED(event) && !waiting_buffer_typed(event)) {
 117:../../tmk_core/common/action_tapping.c ****                     // Modifier should be retained till end of this tapping.
 118:../../tmk_core/common/action_tapping.c ****                     action_t action = layer_switch_get_action(event);
 119:../../tmk_core/common/action_tapping.c ****                     switch (action.kind.id) {
 120:../../tmk_core/common/action_tapping.c ****                         case ACT_LMODS:
 121:../../tmk_core/common/action_tapping.c ****                         case ACT_RMODS:
 122:../../tmk_core/common/action_tapping.c ****                             if (action.key.mods && !action.key.code) return false;
 123:../../tmk_core/common/action_tapping.c ****                             if (IS_MOD(action.key.code)) return false;
 124:../../tmk_core/common/action_tapping.c ****                             break;
 125:../../tmk_core/common/action_tapping.c ****                         case ACT_LMODS_TAP:
 126:../../tmk_core/common/action_tapping.c ****                         case ACT_RMODS_TAP:
 127:../../tmk_core/common/action_tapping.c ****                             if (action.key.mods && keyp->tap.count == 0) return false;
 128:../../tmk_core/common/action_tapping.c ****                             if (IS_MOD(action.key.code)) return false;
 129:../../tmk_core/common/action_tapping.c ****                             break;
 130:../../tmk_core/common/action_tapping.c ****                     }
 131:../../tmk_core/common/action_tapping.c ****                     // Release of key should be process immediately.
 132:../../tmk_core/common/action_tapping.c ****                     debug("Tapping: release event of a key pressed before tapping\n");
 133:../../tmk_core/common/action_tapping.c ****                     process_action(keyp);
 134:../../tmk_core/common/action_tapping.c ****                     return true;
 135:../../tmk_core/common/action_tapping.c ****                 }
 136:../../tmk_core/common/action_tapping.c ****                 else {
 137:../../tmk_core/common/action_tapping.c ****                     // set interrupted flag when other key preesed during tapping
 138:../../tmk_core/common/action_tapping.c ****                     if (event.pressed) {
 139:../../tmk_core/common/action_tapping.c ****                         tapping_key.tap.interrupted = true;
 140:../../tmk_core/common/action_tapping.c ****                     }
 141:../../tmk_core/common/action_tapping.c ****                     // enqueue 
 142:../../tmk_core/common/action_tapping.c ****                     return false;
 143:../../tmk_core/common/action_tapping.c ****                 }
 144:../../tmk_core/common/action_tapping.c ****             }
 145:../../tmk_core/common/action_tapping.c ****             // tap_count > 0
 146:../../tmk_core/common/action_tapping.c ****             else {
 147:../../tmk_core/common/action_tapping.c ****                 if (IS_TAPPING_KEY(event.key) && !event.pressed) {
 148:../../tmk_core/common/action_tapping.c ****                     debug("Tapping: Tap release("); debug_dec(tapping_key.tap.count); debug(")\n");
 149:../../tmk_core/common/action_tapping.c ****                     keyp->tap = tapping_key.tap;
 150:../../tmk_core/common/action_tapping.c ****                     process_action(keyp);
 151:../../tmk_core/common/action_tapping.c ****                     tapping_key = *keyp;
 152:../../tmk_core/common/action_tapping.c ****                     debug_tapping_key();
 153:../../tmk_core/common/action_tapping.c ****                     return true;
 154:../../tmk_core/common/action_tapping.c ****                 }
 155:../../tmk_core/common/action_tapping.c ****                 else if (is_tap_key(event) && event.pressed) {
 156:../../tmk_core/common/action_tapping.c ****                     if (tapping_key.tap.count > 1) {
 157:../../tmk_core/common/action_tapping.c ****                         debug("Tapping: Start new tap with releasing last tap(>1).\n");
 158:../../tmk_core/common/action_tapping.c ****                         // unregister key
 159:../../tmk_core/common/action_tapping.c ****                         process_action(&(keyrecord_t){
 160:../../tmk_core/common/action_tapping.c ****                                 .tap = tapping_key.tap,
 161:../../tmk_core/common/action_tapping.c ****                                 .event.key = tapping_key.event.key,
 162:../../tmk_core/common/action_tapping.c ****                                 .event.time = event.time,
 163:../../tmk_core/common/action_tapping.c ****                                 .event.pressed = false
 164:../../tmk_core/common/action_tapping.c ****                         });
 165:../../tmk_core/common/action_tapping.c ****                     } else {
 166:../../tmk_core/common/action_tapping.c ****                         debug("Tapping: Start while last tap(1).\n");
 167:../../tmk_core/common/action_tapping.c ****                     }
 168:../../tmk_core/common/action_tapping.c ****                     tapping_key = *keyp;
 169:../../tmk_core/common/action_tapping.c ****                     waiting_buffer_scan_tap();
 170:../../tmk_core/common/action_tapping.c ****                     debug_tapping_key();
 171:../../tmk_core/common/action_tapping.c ****                     return true;
 172:../../tmk_core/common/action_tapping.c ****                 }
 173:../../tmk_core/common/action_tapping.c ****                 else {
 174:../../tmk_core/common/action_tapping.c ****                     if (!IS_NOEVENT(event)) {
 175:../../tmk_core/common/action_tapping.c ****                         debug("Tapping: key event while last tap(>0).\n");
 176:../../tmk_core/common/action_tapping.c ****                     }
 177:../../tmk_core/common/action_tapping.c ****                     process_action(keyp);
 178:../../tmk_core/common/action_tapping.c ****                     return true;
 179:../../tmk_core/common/action_tapping.c ****                 }
 180:../../tmk_core/common/action_tapping.c ****             }
 181:../../tmk_core/common/action_tapping.c ****         }
 182:../../tmk_core/common/action_tapping.c ****         // after TAPPING_TERM
 183:../../tmk_core/common/action_tapping.c ****         else {
 184:../../tmk_core/common/action_tapping.c ****             if (tapping_key.tap.count == 0) {
 185:../../tmk_core/common/action_tapping.c ****                 debug("Tapping: End. Timeout. Not tap(0): ");
 186:../../tmk_core/common/action_tapping.c ****                 debug_event(event); debug("\n");
 187:../../tmk_core/common/action_tapping.c ****                 process_action(&tapping_key);
 188:../../tmk_core/common/action_tapping.c ****                 tapping_key = (keyrecord_t){};
 189:../../tmk_core/common/action_tapping.c ****                 debug_tapping_key();
 190:../../tmk_core/common/action_tapping.c ****                 return false;
 191:../../tmk_core/common/action_tapping.c ****             }  else {
 192:../../tmk_core/common/action_tapping.c ****                 if (IS_TAPPING_KEY(event.key) && !event.pressed) {
 193:../../tmk_core/common/action_tapping.c ****                     debug("Tapping: End. last timeout tap release(>0).");
 194:../../tmk_core/common/action_tapping.c ****                     keyp->tap = tapping_key.tap;
 195:../../tmk_core/common/action_tapping.c ****                     process_action(keyp);
 196:../../tmk_core/common/action_tapping.c ****                     tapping_key = (keyrecord_t){};
 197:../../tmk_core/common/action_tapping.c ****                     return true;
 198:../../tmk_core/common/action_tapping.c ****                 }
 199:../../tmk_core/common/action_tapping.c ****                 else if (is_tap_key(event) && event.pressed) {
 200:../../tmk_core/common/action_tapping.c ****                     if (tapping_key.tap.count > 1) {
 201:../../tmk_core/common/action_tapping.c ****                         debug("Tapping: Start new tap with releasing last timeout tap(>1).\n");
 202:../../tmk_core/common/action_tapping.c ****                         // unregister key
 203:../../tmk_core/common/action_tapping.c ****                         process_action(&(keyrecord_t){
 204:../../tmk_core/common/action_tapping.c ****                                 .tap = tapping_key.tap,
 205:../../tmk_core/common/action_tapping.c ****                                 .event.key = tapping_key.event.key,
 206:../../tmk_core/common/action_tapping.c ****                                 .event.time = event.time,
 207:../../tmk_core/common/action_tapping.c ****                                 .event.pressed = false
 208:../../tmk_core/common/action_tapping.c ****                         });
 209:../../tmk_core/common/action_tapping.c ****                     } else {
 210:../../tmk_core/common/action_tapping.c ****                         debug("Tapping: Start while last timeout tap(1).\n");
 211:../../tmk_core/common/action_tapping.c ****                     }
 212:../../tmk_core/common/action_tapping.c ****                     tapping_key = *keyp;
 213:../../tmk_core/common/action_tapping.c ****                     waiting_buffer_scan_tap();
 214:../../tmk_core/common/action_tapping.c ****                     debug_tapping_key();
 215:../../tmk_core/common/action_tapping.c ****                     return true;
 216:../../tmk_core/common/action_tapping.c ****                 }
 217:../../tmk_core/common/action_tapping.c ****                 else {
 218:../../tmk_core/common/action_tapping.c ****                     if (!IS_NOEVENT(event)) {
 219:../../tmk_core/common/action_tapping.c ****                         debug("Tapping: key event while last timeout tap(>0).\n");
 220:../../tmk_core/common/action_tapping.c ****                     }
 221:../../tmk_core/common/action_tapping.c ****                     process_action(keyp);
 222:../../tmk_core/common/action_tapping.c ****                     return true;
 223:../../tmk_core/common/action_tapping.c ****                 }
 224:../../tmk_core/common/action_tapping.c ****             }
 225:../../tmk_core/common/action_tapping.c ****         }
 226:../../tmk_core/common/action_tapping.c ****     } else if (IS_TAPPING_RELEASED()) {
 227:../../tmk_core/common/action_tapping.c ****         if (WITHIN_TAPPING_TERM(event)) {
 228:../../tmk_core/common/action_tapping.c ****             if (event.pressed) {
 229:../../tmk_core/common/action_tapping.c ****                 if (IS_TAPPING_KEY(event.key)) {
 230:../../tmk_core/common/action_tapping.c ****                     if (!tapping_key.tap.interrupted && tapping_key.tap.count > 0) {
 231:../../tmk_core/common/action_tapping.c ****                         // sequential tap.
 232:../../tmk_core/common/action_tapping.c ****                         keyp->tap = tapping_key.tap;
 233:../../tmk_core/common/action_tapping.c ****                         if (keyp->tap.count < 15) keyp->tap.count += 1;
 234:../../tmk_core/common/action_tapping.c ****                         debug("Tapping: Tap press("); debug_dec(keyp->tap.count); debug(")\n");
 235:../../tmk_core/common/action_tapping.c ****                         process_action(keyp);
 236:../../tmk_core/common/action_tapping.c ****                         tapping_key = *keyp;
 237:../../tmk_core/common/action_tapping.c ****                         debug_tapping_key();
 238:../../tmk_core/common/action_tapping.c ****                         return true;
 239:../../tmk_core/common/action_tapping.c ****                     } else {
 240:../../tmk_core/common/action_tapping.c ****                         // FIX: start new tap again
 241:../../tmk_core/common/action_tapping.c ****                         tapping_key = *keyp;
 242:../../tmk_core/common/action_tapping.c ****                         return true;
 243:../../tmk_core/common/action_tapping.c ****                     }
 244:../../tmk_core/common/action_tapping.c ****                 } else if (is_tap_key(event)) {
 245:../../tmk_core/common/action_tapping.c ****                     // Sequential tap can be interfered with other tap key.
 246:../../tmk_core/common/action_tapping.c ****                     debug("Tapping: Start with interfering other tap.\n");
 247:../../tmk_core/common/action_tapping.c ****                     tapping_key = *keyp;
 248:../../tmk_core/common/action_tapping.c ****                     waiting_buffer_scan_tap();
 249:../../tmk_core/common/action_tapping.c ****                     debug_tapping_key();
 250:../../tmk_core/common/action_tapping.c ****                     return true;
 251:../../tmk_core/common/action_tapping.c ****                 } else {
 252:../../tmk_core/common/action_tapping.c ****                     // should none in buffer
 253:../../tmk_core/common/action_tapping.c ****                     // FIX: interrupted when other key is pressed
 254:../../tmk_core/common/action_tapping.c ****                     tapping_key.tap.interrupted = true;
 255:../../tmk_core/common/action_tapping.c ****                     process_action(keyp);
 256:../../tmk_core/common/action_tapping.c ****                     return true;
 257:../../tmk_core/common/action_tapping.c ****                 }
 258:../../tmk_core/common/action_tapping.c ****             } else {
 259:../../tmk_core/common/action_tapping.c ****                 if (!IS_NOEVENT(event)) debug("Tapping: other key just after tap.\n");
 260:../../tmk_core/common/action_tapping.c ****                 process_action(keyp);
 261:../../tmk_core/common/action_tapping.c ****                 return true;
 262:../../tmk_core/common/action_tapping.c ****             }
 263:../../tmk_core/common/action_tapping.c ****         } else {
 264:../../tmk_core/common/action_tapping.c ****             // FIX: process_aciton here?
 265:../../tmk_core/common/action_tapping.c ****             // timeout. no sequential tap.
 266:../../tmk_core/common/action_tapping.c ****             debug("Tapping: End(Timeout after releasing last tap): ");
 267:../../tmk_core/common/action_tapping.c ****             debug_event(event); debug("\n");
 268:../../tmk_core/common/action_tapping.c ****             tapping_key = (keyrecord_t){};
 269:../../tmk_core/common/action_tapping.c ****             debug_tapping_key();
 270:../../tmk_core/common/action_tapping.c ****             return false;
 271:../../tmk_core/common/action_tapping.c ****         }
 272:../../tmk_core/common/action_tapping.c ****     }
 273:../../tmk_core/common/action_tapping.c ****     // not tapping state
 274:../../tmk_core/common/action_tapping.c ****     else {
 275:../../tmk_core/common/action_tapping.c ****         if (event.pressed && is_tap_key(event)) {
 276:../../tmk_core/common/action_tapping.c ****             debug("Tapping: Start(Press tap key).\n");
 277:../../tmk_core/common/action_tapping.c ****             tapping_key = *keyp;
 278:../../tmk_core/common/action_tapping.c ****             waiting_buffer_scan_tap();
 279:../../tmk_core/common/action_tapping.c ****             debug_tapping_key();
 280:../../tmk_core/common/action_tapping.c ****             return true;
 281:../../tmk_core/common/action_tapping.c ****         } else {
 282:../../tmk_core/common/action_tapping.c ****             process_action(keyp);
 283:../../tmk_core/common/action_tapping.c ****             return true;
 284:../../tmk_core/common/action_tapping.c ****         }
 285:../../tmk_core/common/action_tapping.c ****     }
 286:../../tmk_core/common/action_tapping.c **** }
 287:../../tmk_core/common/action_tapping.c **** 
 288:../../tmk_core/common/action_tapping.c **** 
 289:../../tmk_core/common/action_tapping.c **** /*
 290:../../tmk_core/common/action_tapping.c ****  * Waiting buffer
 291:../../tmk_core/common/action_tapping.c ****  */
 292:../../tmk_core/common/action_tapping.c **** bool waiting_buffer_enq(keyrecord_t record)
 293:../../tmk_core/common/action_tapping.c **** {
 294:../../tmk_core/common/action_tapping.c ****     if (IS_NOEVENT(record.event)) {
 295:../../tmk_core/common/action_tapping.c ****         return true;
 296:../../tmk_core/common/action_tapping.c ****     }
 297:../../tmk_core/common/action_tapping.c **** 
 298:../../tmk_core/common/action_tapping.c ****     if ((waiting_buffer_head + 1) % WAITING_BUFFER_SIZE == waiting_buffer_tail) {
 299:../../tmk_core/common/action_tapping.c ****         debug("waiting_buffer_enq: Over flow.\n");
 300:../../tmk_core/common/action_tapping.c ****         return false;
 301:../../tmk_core/common/action_tapping.c ****     }
 302:../../tmk_core/common/action_tapping.c **** 
 303:../../tmk_core/common/action_tapping.c ****     waiting_buffer[waiting_buffer_head] = record;
 304:../../tmk_core/common/action_tapping.c ****     waiting_buffer_head = (waiting_buffer_head + 1) % WAITING_BUFFER_SIZE;
 305:../../tmk_core/common/action_tapping.c **** 
 306:../../tmk_core/common/action_tapping.c ****     debug("waiting_buffer_enq: "); debug_waiting_buffer();
 307:../../tmk_core/common/action_tapping.c ****     return true;
 308:../../tmk_core/common/action_tapping.c **** }
 309:../../tmk_core/common/action_tapping.c **** 
 310:../../tmk_core/common/action_tapping.c **** void waiting_buffer_clear(void)
 311:../../tmk_core/common/action_tapping.c **** {
 312:../../tmk_core/common/action_tapping.c ****     waiting_buffer_head = 0;
 313:../../tmk_core/common/action_tapping.c ****     waiting_buffer_tail = 0;
 314:../../tmk_core/common/action_tapping.c **** }
 315:../../tmk_core/common/action_tapping.c **** 
 316:../../tmk_core/common/action_tapping.c **** bool waiting_buffer_typed(keyevent_t event)
 317:../../tmk_core/common/action_tapping.c **** {
 318:../../tmk_core/common/action_tapping.c ****     for (uint8_t i = waiting_buffer_tail; i != waiting_buffer_head; i = (i + 1) % WAITING_BUFFER_SI
 319:../../tmk_core/common/action_tapping.c ****         if (KEYEQ(event.key, waiting_buffer[i].event.key) && event.pressed !=  waiting_buffer[i].ev
 320:../../tmk_core/common/action_tapping.c ****             return true;
 321:../../tmk_core/common/action_tapping.c ****         }
 322:../../tmk_core/common/action_tapping.c ****     }
 323:../../tmk_core/common/action_tapping.c ****     return false;
 324:../../tmk_core/common/action_tapping.c **** }
 325:../../tmk_core/common/action_tapping.c **** 
 326:../../tmk_core/common/action_tapping.c **** /* scan buffer for tapping */
 327:../../tmk_core/common/action_tapping.c **** void waiting_buffer_scan_tap(void)
 328:../../tmk_core/common/action_tapping.c **** {
 329:../../tmk_core/common/action_tapping.c ****     // tapping already is settled
 330:../../tmk_core/common/action_tapping.c ****     if (tapping_key.tap.count > 0) return;
 331:../../tmk_core/common/action_tapping.c ****     // invalid state: tapping_key released && tap.count == 0
 332:../../tmk_core/common/action_tapping.c ****     if (!tapping_key.event.pressed) return;
 333:../../tmk_core/common/action_tapping.c **** 
 334:../../tmk_core/common/action_tapping.c ****     for (uint8_t i = waiting_buffer_tail; i != waiting_buffer_head; i = (i + 1) % WAITING_BUFFER_SI
 335:../../tmk_core/common/action_tapping.c ****         if (IS_TAPPING_KEY(waiting_buffer[i].event.key) &&
 336:../../tmk_core/common/action_tapping.c ****                 !waiting_buffer[i].event.pressed &&
 337:../../tmk_core/common/action_tapping.c ****                 WITHIN_TAPPING_TERM(waiting_buffer[i].event)) {
 338:../../tmk_core/common/action_tapping.c ****             tapping_key.tap.count = 1;
 339:../../tmk_core/common/action_tapping.c ****             waiting_buffer[i].tap.count = 1;
 340:../../tmk_core/common/action_tapping.c ****             process_action(&tapping_key);
 341:../../tmk_core/common/action_tapping.c **** 
 342:../../tmk_core/common/action_tapping.c ****             debug("waiting_buffer_scan_tap: found at ["); debug_dec(i); debug("]\n");
 343:../../tmk_core/common/action_tapping.c ****             debug_waiting_buffer();
 344:../../tmk_core/common/action_tapping.c ****             return;
 345:../../tmk_core/common/action_tapping.c ****         }
 346:../../tmk_core/common/action_tapping.c ****     }
 347:../../tmk_core/common/action_tapping.c **** }
 348:../../tmk_core/common/action_tapping.c **** 
 349:../../tmk_core/common/action_tapping.c **** 
 350:../../tmk_core/common/action_tapping.c **** /*
 351:../../tmk_core/common/action_tapping.c ****  * debug print
 352:../../tmk_core/common/action_tapping.c ****  */
 353:../../tmk_core/common/action_tapping.c **** static void debug_tapping_key(void)
 354:../../tmk_core/common/action_tapping.c **** {
 355:../../tmk_core/common/action_tapping.c ****     debug("TAPPING_KEY="); debug_record(tapping_key); debug("\n");
 356:../../tmk_core/common/action_tapping.c **** }
 357:../../tmk_core/common/action_tapping.c **** 
 358:../../tmk_core/common/action_tapping.c **** static void debug_waiting_buffer(void)
 359:../../tmk_core/common/action_tapping.c **** {
  15               		.loc 1 359 1 view -0
  16               		.cfi_startproc
  17 0000 1F93      		push r17
  18               	.LCFI0:
  19               		.cfi_def_cfa_offset 3
  20               		.cfi_offset 17, -2
  21 0002 CF93      		push r28
  22               	.LCFI1:
  23               		.cfi_def_cfa_offset 4
  24               		.cfi_offset 28, -3
  25 0004 DF93      		push r29
  26               	.LCFI2:
  27               		.cfi_def_cfa_offset 5
  28               		.cfi_offset 29, -4
  29               	/* prologue: function */
  30               	/* frame size = 0 */
  31               	/* stack size = 3 */
  32               	.L__stack_usage = 3
 360:../../tmk_core/common/action_tapping.c ****     debug("{ ");
  33               		.loc 1 360 5 view .LVU1
 361:../../tmk_core/common/action_tapping.c ****     for (uint8_t i = waiting_buffer_tail; i != waiting_buffer_head; i = (i + 1) % WAITING_BUFFER_SI
  34               		.loc 1 361 5 view .LVU2
  35               	.LBB3:
  36               		.loc 1 361 10 view .LVU3
  37               		.loc 1 361 18 is_stmt 0 view .LVU4
  38 0006 E091 0000 		lds r30,waiting_buffer_tail
  39               	.LVL0:
 362:../../tmk_core/common/action_tapping.c ****         debug("["); debug_dec(i); debug("]="); debug_record(waiting_buffer[i]); debug(" ");
  40               		.loc 1 362 48 view .LVU5
  41 000a 16E0      		ldi r17,lo8(6)
  42               	.LVL1:
  43               	.L2:
 361:../../tmk_core/common/action_tapping.c ****     for (uint8_t i = waiting_buffer_tail; i != waiting_buffer_head; i = (i + 1) % WAITING_BUFFER_SI
  44               		.loc 1 361 43 is_stmt 1 discriminator 1 view .LVU6
 361:../../tmk_core/common/action_tapping.c ****     for (uint8_t i = waiting_buffer_tail; i != waiting_buffer_head; i = (i + 1) % WAITING_BUFFER_SI
  45               		.loc 1 361 5 is_stmt 0 discriminator 1 view .LVU7
  46 000c 8091 0000 		lds r24,waiting_buffer_head
  47 0010 8E13      		cpse r24,r30
  48 0012 00C0      		rjmp .L3
  49               	/* epilogue start */
  50               	.LBE3:
 363:../../tmk_core/common/action_tapping.c ****     }
 364:../../tmk_core/common/action_tapping.c ****     debug("}\n");
 365:../../tmk_core/common/action_tapping.c **** }
  51               		.loc 1 365 1 view .LVU8
  52 0014 DF91      		pop r29
  53 0016 CF91      		pop r28
  54 0018 1F91      		pop r17
  55 001a 0895      		ret
  56               	.L3:
  57               	.LBB4:
 362:../../tmk_core/common/action_tapping.c ****         debug("["); debug_dec(i); debug("]="); debug_record(waiting_buffer[i]); debug(" ");
  58               		.loc 1 362 9 is_stmt 1 discriminator 3 view .LVU9
 362:../../tmk_core/common/action_tapping.c ****         debug("["); debug_dec(i); debug("]="); debug_record(waiting_buffer[i]); debug(" ");
  59               		.loc 1 362 21 discriminator 3 view .LVU10
 362:../../tmk_core/common/action_tapping.c ****         debug("["); debug_dec(i); debug("]="); debug_record(waiting_buffer[i]); debug(" ");
  60               		.loc 1 362 35 discriminator 3 view .LVU11
 362:../../tmk_core/common/action_tapping.c ****         debug("["); debug_dec(i); debug("]="); debug_record(waiting_buffer[i]); debug(" ");
  61               		.loc 1 362 48 discriminator 3 view .LVU12
  62 001c CE2F      		mov r28,r30
  63 001e D0E0      		ldi r29,0
  64 0020 1E9F      		mul r17,r30
  65 0022 F001      		movw r30,r0
  66 0024 1124      		clr __zero_reg__
  67               	.LVL2:
 362:../../tmk_core/common/action_tapping.c ****         debug("["); debug_dec(i); debug("]="); debug_record(waiting_buffer[i]); debug(" ");
  68               		.loc 1 362 48 is_stmt 0 discriminator 3 view .LVU13
  69 0026 E050      		subi r30,lo8(-(waiting_buffer))
  70 0028 F040      		sbci r31,hi8(-(waiting_buffer))
  71 002a 4081      		ld r20,Z
  72 002c 5181      		ldd r21,Z+1
  73 002e 6281      		ldd r22,Z+2
  74 0030 7381      		ldd r23,Z+3
  75 0032 8481      		ldd r24,Z+4
  76 0034 9581      		ldd r25,Z+5
  77 0036 0E94 0000 		call debug_record
  78               	.LVL3:
 362:../../tmk_core/common/action_tapping.c ****         debug("["); debug_dec(i); debug("]="); debug_record(waiting_buffer[i]); debug(" ");
  79               		.loc 1 362 81 is_stmt 1 discriminator 3 view .LVU14
 361:../../tmk_core/common/action_tapping.c ****         debug("["); debug_dec(i); debug("]="); debug_record(waiting_buffer[i]); debug(" ");
  80               		.loc 1 361 69 discriminator 3 view .LVU15
 361:../../tmk_core/common/action_tapping.c ****         debug("["); debug_dec(i); debug("]="); debug_record(waiting_buffer[i]); debug(" ");
  81               		.loc 1 361 76 is_stmt 0 discriminator 3 view .LVU16
  82 003a FE01      		movw r30,r28
  83 003c 3196      		adiw r30,1
 361:../../tmk_core/common/action_tapping.c ****         debug("["); debug_dec(i); debug("]="); debug_record(waiting_buffer[i]); debug(" ");
  84               		.loc 1 361 71 discriminator 3 view .LVU17
  85 003e E770      		andi r30,lo8(7)
  86               	.LVL4:
 361:../../tmk_core/common/action_tapping.c ****         debug("["); debug_dec(i); debug("]="); debug_record(waiting_buffer[i]); debug(" ");
  87               		.loc 1 361 71 discriminator 3 view .LVU18
  88 0040 00C0      		rjmp .L2
  89               	.LBE4:
  90               		.cfi_endproc
  91               	.LFE11:
  93               		.section	.text.debug_tapping_key,"ax",@progbits
  95               	debug_tapping_key:
  96               	.LFB10:
 354:../../tmk_core/common/action_tapping.c ****     debug("TAPPING_KEY="); debug_record(tapping_key); debug("\n");
  97               		.loc 1 354 1 is_stmt 1 view -0
  98               		.cfi_startproc
  99               	/* prologue: function */
 100               	/* frame size = 0 */
 101               	/* stack size = 0 */
 102               	.L__stack_usage = 0
 355:../../tmk_core/common/action_tapping.c **** }
 103               		.loc 1 355 5 view .LVU20
 355:../../tmk_core/common/action_tapping.c **** }
 104               		.loc 1 355 28 view .LVU21
 105 0000 4091 0000 		lds r20,tapping_key
 106 0004 5091 0000 		lds r21,tapping_key+1
 107 0008 6091 0000 		lds r22,tapping_key+2
 108 000c 7091 0000 		lds r23,tapping_key+3
 109 0010 8091 0000 		lds r24,tapping_key+4
 110 0014 9091 0000 		lds r25,tapping_key+5
 111 0018 0C94 0000 		jmp debug_record
 112               	.LVL5:
 113               		.cfi_endproc
 114               	.LFE10:
 116               		.section	.text.waiting_buffer_scan_tap,"ax",@progbits
 118               	waiting_buffer_scan_tap:
 119               	.LFB9:
 328:../../tmk_core/common/action_tapping.c ****     // tapping already is settled
 120               		.loc 1 328 1 view -0
 121               		.cfi_startproc
 122 0000 1F93      		push r17
 123               	.LCFI3:
 124               		.cfi_def_cfa_offset 3
 125               		.cfi_offset 17, -2
 126 0002 CF93      		push r28
 127               	.LCFI4:
 128               		.cfi_def_cfa_offset 4
 129               		.cfi_offset 28, -3
 130 0004 DF93      		push r29
 131               	.LCFI5:
 132               		.cfi_def_cfa_offset 5
 133               		.cfi_offset 29, -4
 134               	/* prologue: function */
 135               	/* frame size = 0 */
 136               	/* stack size = 3 */
 137               	.L__stack_usage = 3
 330:../../tmk_core/common/action_tapping.c ****     // invalid state: tapping_key released && tap.count == 0
 138               		.loc 1 330 5 view .LVU23
 330:../../tmk_core/common/action_tapping.c ****     // invalid state: tapping_key released && tap.count == 0
 139               		.loc 1 330 31 is_stmt 0 view .LVU24
 140 0006 8091 0000 		lds r24,tapping_key+5
 141 000a 807F      		andi r24,lo8(-16)
 330:../../tmk_core/common/action_tapping.c ****     // invalid state: tapping_key released && tap.count == 0
 142               		.loc 1 330 8 view .LVU25
 143 000c 01F4      		brne .L5
 332:../../tmk_core/common/action_tapping.c **** 
 144               		.loc 1 332 5 is_stmt 1 view .LVU26
 332:../../tmk_core/common/action_tapping.c **** 
 145               		.loc 1 332 8 is_stmt 0 view .LVU27
 146 000e 8091 0000 		lds r24,tapping_key+2
 147 0012 8823      		tst r24
 148 0014 01F0      		breq .L5
 334:../../tmk_core/common/action_tapping.c ****         if (IS_TAPPING_KEY(waiting_buffer[i].event.key) &&
 149               		.loc 1 334 5 is_stmt 1 view .LVU28
 150               	.LBB8:
 334:../../tmk_core/common/action_tapping.c ****         if (IS_TAPPING_KEY(waiting_buffer[i].event.key) &&
 151               		.loc 1 334 10 view .LVU29
 334:../../tmk_core/common/action_tapping.c ****         if (IS_TAPPING_KEY(waiting_buffer[i].event.key) &&
 152               		.loc 1 334 18 is_stmt 0 view .LVU30
 153 0016 8091 0000 		lds r24,waiting_buffer_tail
 154               	.LVL6:
 334:../../tmk_core/common/action_tapping.c ****         if (IS_TAPPING_KEY(waiting_buffer[i].event.key) &&
 155               		.loc 1 334 45 view .LVU31
 156 001a C091 0000 		lds r28,waiting_buffer_head
 335:../../tmk_core/common/action_tapping.c ****                 !waiting_buffer[i].event.pressed &&
 157               		.loc 1 335 13 view .LVU32
 158 001e 6091 0000 		lds r22,tapping_key
 159 0022 7091 0000 		lds r23,tapping_key+1
 160 0026 4091 0000 		lds r20,tapping_key+3
 161 002a 5091 0000 		lds r21,tapping_key+3+1
 162 002e D62F      		mov r29,r22
 163 0030 D723      		and r29,r23
 164 0032 DA01      		movw r26,r20
 165 0034 A095      		com r26
 166 0036 B095      		com r27
 167 0038 16E0      		ldi r17,lo8(6)
 168               	.LVL7:
 169               	.L7:
 334:../../tmk_core/common/action_tapping.c ****         if (IS_TAPPING_KEY(waiting_buffer[i].event.key) &&
 170               		.loc 1 334 43 is_stmt 1 discriminator 1 view .LVU33
 334:../../tmk_core/common/action_tapping.c ****         if (IS_TAPPING_KEY(waiting_buffer[i].event.key) &&
 171               		.loc 1 334 5 is_stmt 0 discriminator 1 view .LVU34
 172 003a C813      		cpse r28,r24
 173 003c 00C0      		rjmp .L14
 174               	.LVL8:
 175               	.L5:
 176               	/* epilogue start */
 334:../../tmk_core/common/action_tapping.c ****         if (IS_TAPPING_KEY(waiting_buffer[i].event.key) &&
 177               		.loc 1 334 5 discriminator 1 view .LVU35
 178               	.LBE8:
 347:../../tmk_core/common/action_tapping.c **** 
 179               		.loc 1 347 1 view .LVU36
 180 003e DF91      		pop r29
 181 0040 CF91      		pop r28
 182 0042 1F91      		pop r17
 183 0044 0895      		ret
 184               	.LVL9:
 185               	.L14:
 186               	.LBB11:
 335:../../tmk_core/common/action_tapping.c ****                 !waiting_buffer[i].event.pressed &&
 187               		.loc 1 335 9 is_stmt 1 view .LVU37
 188               	.LBB9:
 189               	.LBI9:
 190               		.file 2 "../../tmk_core/common/keyboard.h"
   1:../../tmk_core/common/keyboard.h **** /*
   2:../../tmk_core/common/keyboard.h **** Copyright 2011,2012,2013 Jun Wako <wakojun@gmail.com>
   3:../../tmk_core/common/keyboard.h **** 
   4:../../tmk_core/common/keyboard.h **** This program is free software: you can redistribute it and/or modify
   5:../../tmk_core/common/keyboard.h **** it under the terms of the GNU General Public License as published by
   6:../../tmk_core/common/keyboard.h **** the Free Software Foundation, either version 2 of the License, or
   7:../../tmk_core/common/keyboard.h **** (at your option) any later version.
   8:../../tmk_core/common/keyboard.h **** 
   9:../../tmk_core/common/keyboard.h **** This program is distributed in the hope that it will be useful,
  10:../../tmk_core/common/keyboard.h **** but WITHOUT ANY WARRANTY; without even the implied warranty of
  11:../../tmk_core/common/keyboard.h **** MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  12:../../tmk_core/common/keyboard.h **** GNU General Public License for more details.
  13:../../tmk_core/common/keyboard.h **** 
  14:../../tmk_core/common/keyboard.h **** You should have received a copy of the GNU General Public License
  15:../../tmk_core/common/keyboard.h **** along with this program.  If not, see <http://www.gnu.org/licenses/>.
  16:../../tmk_core/common/keyboard.h **** */
  17:../../tmk_core/common/keyboard.h **** 
  18:../../tmk_core/common/keyboard.h **** #ifndef KEYBOARD_H
  19:../../tmk_core/common/keyboard.h **** #define KEYBOARD_H
  20:../../tmk_core/common/keyboard.h **** 
  21:../../tmk_core/common/keyboard.h **** #include <stdbool.h>
  22:../../tmk_core/common/keyboard.h **** #include <stdint.h>
  23:../../tmk_core/common/keyboard.h **** 
  24:../../tmk_core/common/keyboard.h **** 
  25:../../tmk_core/common/keyboard.h **** #ifdef __cplusplus
  26:../../tmk_core/common/keyboard.h **** extern "C" {
  27:../../tmk_core/common/keyboard.h **** #endif
  28:../../tmk_core/common/keyboard.h **** 
  29:../../tmk_core/common/keyboard.h **** /* key matrix position */
  30:../../tmk_core/common/keyboard.h **** typedef struct {
  31:../../tmk_core/common/keyboard.h ****     uint8_t col;
  32:../../tmk_core/common/keyboard.h ****     uint8_t row;
  33:../../tmk_core/common/keyboard.h **** } keypos_t;
  34:../../tmk_core/common/keyboard.h **** 
  35:../../tmk_core/common/keyboard.h **** /* key event */
  36:../../tmk_core/common/keyboard.h **** typedef struct {
  37:../../tmk_core/common/keyboard.h ****     keypos_t key;
  38:../../tmk_core/common/keyboard.h ****     bool     pressed;
  39:../../tmk_core/common/keyboard.h ****     uint16_t time;
  40:../../tmk_core/common/keyboard.h **** } keyevent_t;
  41:../../tmk_core/common/keyboard.h **** 
  42:../../tmk_core/common/keyboard.h **** /* equivalent test of keypos_t */
  43:../../tmk_core/common/keyboard.h **** #define KEYEQ(keya, keyb)       ((keya).row == (keyb).row && (keya).col == (keyb).col)
  44:../../tmk_core/common/keyboard.h **** 
  45:../../tmk_core/common/keyboard.h **** /* Rules for No Event:
  46:../../tmk_core/common/keyboard.h ****  * 1) (time == 0) to handle (keyevent_t){} as empty event
  47:../../tmk_core/common/keyboard.h ****  * 2) Matrix(255, 255) to make TICK event available
  48:../../tmk_core/common/keyboard.h ****  */
  49:../../tmk_core/common/keyboard.h **** static inline bool IS_NOEVENT(keyevent_t event) { return event.time == 0 || (event.key.row == 255 &
 191               		.loc 2 49 20 view .LVU38
 192               	.LBB10:
 193               		.loc 2 49 51 view .LVU39
 194 0046 90E0      		ldi r25,0
 195               		.loc 2 49 74 is_stmt 0 view .LVU40
 196 0048 4115      		cp r20,__zero_reg__
 197 004a 5105      		cpc r21,__zero_reg__
 198 004c 01F0      		breq .L8
 199 004e DF3F      		cpi r29,lo8(-1)
 200 0050 01F4      		brne .L27
 201               	.L8:
 202               	.LBE10:
 203               	.LBE9:
 334:../../tmk_core/common/action_tapping.c ****         if (IS_TAPPING_KEY(waiting_buffer[i].event.key) &&
 204               		.loc 1 334 69 is_stmt 1 discriminator 2 view .LVU41
 334:../../tmk_core/common/action_tapping.c ****         if (IS_TAPPING_KEY(waiting_buffer[i].event.key) &&
 205               		.loc 1 334 76 is_stmt 0 discriminator 2 view .LVU42
 206 0052 0196      		adiw r24,1
 207               	.LVL10:
 334:../../tmk_core/common/action_tapping.c ****         if (IS_TAPPING_KEY(waiting_buffer[i].event.key) &&
 208               		.loc 1 334 71 discriminator 2 view .LVU43
 209 0054 8770      		andi r24,lo8(7)
 334:../../tmk_core/common/action_tapping.c ****         if (IS_TAPPING_KEY(waiting_buffer[i].event.key) &&
 210               		.loc 1 334 71 discriminator 2 view .LVU44
 211 0056 00C0      		rjmp .L7
 212               	.LVL11:
 213               	.L10:
 337:../../tmk_core/common/action_tapping.c ****             tapping_key.tap.count = 1;
 214               		.loc 1 337 17 discriminator 2 view .LVU45
 215 0058 2A0F      		add r18,r26
 216 005a 3B1F      		adc r19,r27
 217 005c 00C0      		rjmp .L28
 218               	.L27:
 335:../../tmk_core/common/action_tapping.c ****                 !waiting_buffer[i].event.pressed &&
 219               		.loc 1 335 13 view .LVU46
 220 005e 189F      		mul r17,r24
 221 0060 F001      		movw r30,r0
 222 0062 199F      		mul r17,r25
 223 0064 F00D      		add r31,r0
 224 0066 1124      		clr __zero_reg__
 225 0068 E050      		subi r30,lo8(-(waiting_buffer))
 226 006a F040      		sbci r31,hi8(-(waiting_buffer))
 227 006c 2181      		ldd r18,Z+1
 228 006e 2713      		cpse r18,r23
 229 0070 00C0      		rjmp .L8
 335:../../tmk_core/common/action_tapping.c ****                 !waiting_buffer[i].event.pressed &&
 230               		.loc 1 335 13 discriminator 2 view .LVU47
 231 0072 2081      		ld r18,Z
 232 0074 2613      		cpse r18,r22
 233 0076 00C0      		rjmp .L8
 335:../../tmk_core/common/action_tapping.c ****                 !waiting_buffer[i].event.pressed &&
 234               		.loc 1 335 57 discriminator 3 view .LVU48
 235 0078 2281      		ldd r18,Z+2
 236 007a 2111      		cpse r18,__zero_reg__
 237 007c 00C0      		rjmp .L8
 337:../../tmk_core/common/action_tapping.c ****             tapping_key.tap.count = 1;
 238               		.loc 1 337 17 view .LVU49
 239 007e 2381      		ldd r18,Z+3
 240 0080 3481      		ldd r19,Z+4
 241 0082 2417      		cp r18,r20
 242 0084 3507      		cpc r19,r21
 243 0086 00F0      		brlo .L10
 337:../../tmk_core/common/action_tapping.c ****             tapping_key.tap.count = 1;
 244               		.loc 1 337 17 discriminator 1 view .LVU50
 245 0088 241B      		sub r18,r20
 246 008a 350B      		sbc r19,r21
 247               	.L28:
 337:../../tmk_core/common/action_tapping.c ****             tapping_key.tap.count = 1;
 248               		.loc 1 337 17 discriminator 2 view .LVU51
 249 008c 283C      		cpi r18,-56
 250 008e 3105      		cpc r19,__zero_reg__
 251 0090 00F4      		brsh .L8
 338:../../tmk_core/common/action_tapping.c ****             waiting_buffer[i].tap.count = 1;
 252               		.loc 1 338 13 is_stmt 1 view .LVU52
 338:../../tmk_core/common/action_tapping.c ****             waiting_buffer[i].tap.count = 1;
 253               		.loc 1 338 35 is_stmt 0 view .LVU53
 254 0092 2091 0000 		lds r18,tapping_key+5
 255 0096 2F70      		andi r18,lo8(15)
 256 0098 2061      		ori r18,lo8(16)
 257 009a 2093 0000 		sts tapping_key+5,r18
 339:../../tmk_core/common/action_tapping.c ****             process_action(&tapping_key);
 258               		.loc 1 339 13 is_stmt 1 view .LVU54
 339:../../tmk_core/common/action_tapping.c ****             process_action(&tapping_key);
 259               		.loc 1 339 41 is_stmt 0 view .LVU55
 260 009e 26E0      		ldi r18,lo8(6)
 261 00a0 289F      		mul r18,r24
 262 00a2 F001      		movw r30,r0
 263 00a4 299F      		mul r18,r25
 264 00a6 F00D      		add r31,r0
 265 00a8 1124      		clr __zero_reg__
 266 00aa E050      		subi r30,lo8(-(waiting_buffer+5))
 267 00ac F040      		sbci r31,hi8(-(waiting_buffer+5))
 268 00ae 8081      		ld r24,Z
 269               	.LVL12:
 339:../../tmk_core/common/action_tapping.c ****             process_action(&tapping_key);
 270               		.loc 1 339 41 view .LVU56
 271 00b0 8F70      		andi r24,lo8(15)
 272 00b2 8061      		ori r24,lo8(16)
 273 00b4 8083      		st Z,r24
 340:../../tmk_core/common/action_tapping.c **** 
 274               		.loc 1 340 13 is_stmt 1 view .LVU57
 275 00b6 80E0      		ldi r24,lo8(tapping_key)
 276 00b8 90E0      		ldi r25,hi8(tapping_key)
 277 00ba 0E94 0000 		call process_action
 278               	.LVL13:
 342:../../tmk_core/common/action_tapping.c ****             debug_waiting_buffer();
 279               		.loc 1 342 13 view .LVU58
 342:../../tmk_core/common/action_tapping.c ****             debug_waiting_buffer();
 280               		.loc 1 342 59 view .LVU59
 342:../../tmk_core/common/action_tapping.c ****             debug_waiting_buffer();
 281               		.loc 1 342 73 view .LVU60
 343:../../tmk_core/common/action_tapping.c ****             return;
 282               		.loc 1 343 13 view .LVU61
 283               	/* epilogue start */
 284               	.LBE11:
 347:../../tmk_core/common/action_tapping.c **** 
 285               		.loc 1 347 1 is_stmt 0 view .LVU62
 286 00be DF91      		pop r29
 287 00c0 CF91      		pop r28
 288 00c2 1F91      		pop r17
 289               	.LBB12:
 343:../../tmk_core/common/action_tapping.c ****             return;
 290               		.loc 1 343 13 view .LVU63
 291 00c4 0C94 0000 		jmp debug_waiting_buffer
 292               	.LVL14:
 293               	.LBE12:
 294               		.cfi_endproc
 295               	.LFE9:
 297               		.section	.text.process_tapping,"ax",@progbits
 299               	process_tapping:
 300               	.LVL15:
 301               	.LFB5:
  79:../../tmk_core/common/action_tapping.c ****     keyevent_t event = keyp->event;
 302               		.loc 1 79 1 is_stmt 1 view -0
 303               		.cfi_startproc
  79:../../tmk_core/common/action_tapping.c ****     keyevent_t event = keyp->event;
 304               		.loc 1 79 1 is_stmt 0 view .LVU65
 305 0000 9F92      		push r9
 306               	.LCFI6:
 307               		.cfi_def_cfa_offset 3
 308               		.cfi_offset 9, -2
 309 0002 AF92      		push r10
 310               	.LCFI7:
 311               		.cfi_def_cfa_offset 4
 312               		.cfi_offset 10, -3
 313 0004 BF92      		push r11
 314               	.LCFI8:
 315               		.cfi_def_cfa_offset 5
 316               		.cfi_offset 11, -4
 317 0006 CF92      		push r12
 318               	.LCFI9:
 319               		.cfi_def_cfa_offset 6
 320               		.cfi_offset 12, -5
 321 0008 DF92      		push r13
 322               	.LCFI10:
 323               		.cfi_def_cfa_offset 7
 324               		.cfi_offset 13, -6
 325 000a EF92      		push r14
 326               	.LCFI11:
 327               		.cfi_def_cfa_offset 8
 328               		.cfi_offset 14, -7
 329 000c FF92      		push r15
 330               	.LCFI12:
 331               		.cfi_def_cfa_offset 9
 332               		.cfi_offset 15, -8
 333 000e 0F93      		push r16
 334               	.LCFI13:
 335               		.cfi_def_cfa_offset 10
 336               		.cfi_offset 16, -9
 337 0010 1F93      		push r17
 338               	.LCFI14:
 339               		.cfi_def_cfa_offset 11
 340               		.cfi_offset 17, -10
 341 0012 CF93      		push r28
 342               	.LCFI15:
 343               		.cfi_def_cfa_offset 12
 344               		.cfi_offset 28, -11
 345 0014 DF93      		push r29
 346               	.LCFI16:
 347               		.cfi_def_cfa_offset 13
 348               		.cfi_offset 29, -12
 349 0016 CDB7      		in r28,__SP_L__
 350 0018 DEB7      		in r29,__SP_H__
 351               	.LCFI17:
 352               		.cfi_def_cfa_register 28
 353 001a 2B97      		sbiw r28,11
 354               	.LCFI18:
 355               		.cfi_def_cfa_offset 24
 356 001c 0FB6      		in __tmp_reg__,__SREG__
 357 001e F894      		cli
 358 0020 DEBF      		out __SP_H__,r29
 359 0022 0FBE      		out __SREG__,__tmp_reg__
 360 0024 CDBF      		out __SP_L__,r28
 361               	/* prologue: function */
 362               	/* frame size = 11 */
 363               	/* stack size = 22 */
 364               	.L__stack_usage = 22
 365 0026 7C01      		movw r14,r24
  80:../../tmk_core/common/action_tapping.c **** 
 366               		.loc 1 80 5 is_stmt 1 view .LVU66
  80:../../tmk_core/common/action_tapping.c **** 
 367               		.loc 1 80 16 is_stmt 0 view .LVU67
 368 0028 85E0      		ldi r24,lo8(5)
 369               	.LVL16:
  80:../../tmk_core/common/action_tapping.c **** 
 370               		.loc 1 80 16 view .LVU68
 371 002a F701      		movw r30,r14
 372 002c DE01      		movw r26,r28
 373 002e 1796      		adiw r26,7
 374               		0:
 375 0030 0190      		ld r0,Z+
 376 0032 0D92      		st X+,r0
 377 0034 8A95      		dec r24
 378 0036 01F4      		brne 0b
 379 0038 D701      		movw r26,r14
 380 003a 4C91      		ld r20,X
 381               	.LVL17:
  80:../../tmk_core/common/action_tapping.c **** 
 382               		.loc 1 80 16 view .LVU69
 383 003c 1196      		adiw r26,1
 384 003e 5C91      		ld r21,X
 385 0040 1197      		sbiw r26,1
 386               	.LVL18:
  80:../../tmk_core/common/action_tapping.c **** 
 387               		.loc 1 80 16 view .LVU70
 388 0042 1296      		adiw r26,2
 389 0044 DC90      		ld r13,X
 390 0046 1297      		sbiw r26,2
 391               	.LVL19:
  80:../../tmk_core/common/action_tapping.c **** 
 392               		.loc 1 80 16 view .LVU71
 393 0048 1396      		adiw r26,3
 394 004a 0D91      		ld r16,X+
 395 004c 1C91      		ld r17,X
 396               	.LVL20:
  83:../../tmk_core/common/action_tapping.c ****         if (WITHIN_TAPPING_TERM(event)) {
 397               		.loc 1 83 5 is_stmt 1 view .LVU72
  83:../../tmk_core/common/action_tapping.c ****         if (WITHIN_TAPPING_TERM(event)) {
 398               		.loc 1 83 9 is_stmt 0 view .LVU73
 399 004e 8091 0000 		lds r24,tapping_key+3
 400 0052 9091 0000 		lds r25,tapping_key+3+1
 401               	.LBB28:
 402               	.LBI28:
 403               		.loc 2 49 20 is_stmt 1 view .LVU74
 404               	.LBB29:
 405               		.loc 2 49 51 view .LVU75
 406               		.loc 2 49 74 is_stmt 0 view .LVU76
 407 0056 0097      		sbiw r24,0
 408 0058 01F4      		brne .+2
 409 005a 00C0      		rjmp .L30
 410               	.LBE29:
 411               	.LBE28:
  83:../../tmk_core/common/action_tapping.c ****         if (WITHIN_TAPPING_TERM(event)) {
 412               		.loc 1 83 9 view .LVU77
 413 005c 2091 0000 		lds r18,tapping_key
 414 0060 3091 0000 		lds r19,tapping_key+1
 415               	.LBB31:
 416               	.LBB30:
 417               		.loc 2 49 74 view .LVU78
 418 0064 632F      		mov r22,r19
 419 0066 6223      		and r22,r18
 420 0068 6F3F      		cpi r22,lo8(-1)
 421 006a 01F4      		brne .+2
 422 006c 00C0      		rjmp .L30
 423               	.LBE30:
 424               	.LBE31:
  83:../../tmk_core/common/action_tapping.c ****         if (WITHIN_TAPPING_TERM(event)) {
 425               		.loc 1 83 9 discriminator 1 view .LVU79
 426 006e 9090 0000 		lds r9,tapping_key+2
 427 0072 9920      		tst r9
 428 0074 01F4      		brne .+2
 429 0076 00C0      		rjmp .L31
  84:../../tmk_core/common/action_tapping.c ****             if (tapping_key.tap.count == 0) {
 430               		.loc 1 84 9 is_stmt 1 view .LVU80
  84:../../tmk_core/common/action_tapping.c ****             if (tapping_key.tap.count == 0) {
 431               		.loc 1 84 13 is_stmt 0 view .LVU81
 432 0078 0817      		cp r16,r24
 433 007a 1907      		cpc r17,r25
 434 007c 00F4      		brsh .+2
 435 007e 00C0      		rjmp .L32
  84:../../tmk_core/common/action_tapping.c ****             if (tapping_key.tap.count == 0) {
 436               		.loc 1 84 13 discriminator 1 view .LVU82
 437 0080 F801      		movw r30,r16
 438 0082 E81B      		sub r30,r24
 439 0084 F90B      		sbc r31,r25
 440 0086 CF01      		movw r24,r30
 441               	.L120:
  84:../../tmk_core/common/action_tapping.c ****             if (tapping_key.tap.count == 0) {
 442               		.loc 1 84 13 discriminator 2 view .LVU83
 443 0088 CC24      		clr r12
 444 008a C394      		inc r12
 445 008c 883C      		cpi r24,-56
 446 008e 9105      		cpc r25,__zero_reg__
 447 0090 00F0      		brlo .L34
 448 0092 C12C      		mov r12,__zero_reg__
 449               	.L34:
 450 0094 80E0      		ldi r24,lo8(tapping_key)
 451 0096 A82E      		mov r10,r24
 452 0098 80E0      		ldi r24,hi8(tapping_key)
 453 009a B82E      		mov r11,r24
 454 009c 8091 0000 		lds r24,tapping_key+5
 455 00a0 982F      		mov r25,r24
 456 00a2 907F      		andi r25,lo8(-16)
  84:../../tmk_core/common/action_tapping.c ****             if (tapping_key.tap.count == 0) {
 457               		.loc 1 84 12 discriminator 4 view .LVU84
 458 00a4 CC20      		tst r12
 459 00a6 01F4      		brne .+2
 460 00a8 00C0      		rjmp .L36
  85:../../tmk_core/common/action_tapping.c ****                 if (IS_TAPPING_KEY(event.key) && !event.pressed) {
 461               		.loc 1 85 13 is_stmt 1 view .LVU85
  85:../../tmk_core/common/action_tapping.c ****                 if (IS_TAPPING_KEY(event.key) && !event.pressed) {
 462               		.loc 1 85 16 is_stmt 0 view .LVU86
 463 00aa 9111      		cpse r25,__zero_reg__
 464 00ac 00C0      		rjmp .L37
  86:../../tmk_core/common/action_tapping.c ****                     // first tap!
 465               		.loc 1 86 17 is_stmt 1 discriminator 1 view .LVU87
 466 00ae CD2C      		mov r12,r13
  86:../../tmk_core/common/action_tapping.c ****                     // first tap!
 467               		.loc 1 86 21 is_stmt 0 discriminator 1 view .LVU88
 468 00b0 3513      		cpse r19,r21
 469 00b2 00C0      		rjmp .L38
 470               	.LVL21:
  86:../../tmk_core/common/action_tapping.c ****                     // first tap!
 471               		.loc 1 86 21 discriminator 2 view .LVU89
 472 00b4 2413      		cpse r18,r20
 473 00b6 00C0      		rjmp .L38
  86:../../tmk_core/common/action_tapping.c ****                     // first tap!
 474               		.loc 1 86 47 discriminator 3 view .LVU90
 475 00b8 D110      		cpse r13,__zero_reg__
 476 00ba 00C0      		rjmp .L38
  88:../../tmk_core/common/action_tapping.c ****                     tapping_key.tap.count = 1;
 477               		.loc 1 88 21 is_stmt 1 view .LVU91
  89:../../tmk_core/common/action_tapping.c ****                     debug_tapping_key();
 478               		.loc 1 89 21 view .LVU92
  89:../../tmk_core/common/action_tapping.c ****                     debug_tapping_key();
 479               		.loc 1 89 43 is_stmt 0 view .LVU93
 480 00bc 8F70      		andi r24,lo8(15)
 481 00be 8061      		ori r24,lo8(16)
 482 00c0 8093 0000 		sts tapping_key+5,r24
  90:../../tmk_core/common/action_tapping.c ****                     process_action(&tapping_key);
 483               		.loc 1 90 21 is_stmt 1 view .LVU94
 484 00c4 0E94 0000 		call debug_tapping_key
 485               	.LVL22:
  91:../../tmk_core/common/action_tapping.c **** 
 486               		.loc 1 91 21 view .LVU95
 487 00c8 C501      		movw r24,r10
 488 00ca 0E94 0000 		call process_action
 489               	.LVL23:
  94:../../tmk_core/common/action_tapping.c ****                     // enqueue
 490               		.loc 1 94 21 view .LVU96
  94:../../tmk_core/common/action_tapping.c ****                     // enqueue
 491               		.loc 1 94 31 is_stmt 0 view .LVU97
 492 00ce 8091 0000 		lds r24,tapping_key+5
 493 00d2 D701      		movw r26,r14
 494 00d4 1596      		adiw r26,5
 495 00d6 8C93      		st X,r24
  96:../../tmk_core/common/action_tapping.c ****                 }
 496               		.loc 1 96 21 is_stmt 1 view .LVU98
 497               	.LVL24:
 498               	.L29:
 286:../../tmk_core/common/action_tapping.c **** 
 499               		.loc 1 286 1 is_stmt 0 view .LVU99
 500 00d8 8C2D      		mov r24,r12
 501               	/* epilogue start */
 286:../../tmk_core/common/action_tapping.c **** 
 502               		.loc 1 286 1 view .LVU100
 503 00da 2B96      		adiw r28,11
 504 00dc 0FB6      		in __tmp_reg__,__SREG__
 505 00de F894      		cli
 506 00e0 DEBF      		out __SP_H__,r29
 507 00e2 0FBE      		out __SREG__,__tmp_reg__
 508 00e4 CDBF      		out __SP_L__,r28
 509 00e6 DF91      		pop r29
 510 00e8 CF91      		pop r28
 511 00ea 1F91      		pop r17
 512 00ec 0F91      		pop r16
 513               	.LVL25:
 286:../../tmk_core/common/action_tapping.c **** 
 514               		.loc 1 286 1 view .LVU101
 515 00ee FF90      		pop r15
 516 00f0 EF90      		pop r14
 517               	.LVL26:
 286:../../tmk_core/common/action_tapping.c **** 
 518               		.loc 1 286 1 view .LVU102
 519 00f2 DF90      		pop r13
 520               	.LVL27:
 286:../../tmk_core/common/action_tapping.c **** 
 521               		.loc 1 286 1 view .LVU103
 522 00f4 CF90      		pop r12
 523 00f6 BF90      		pop r11
 524 00f8 AF90      		pop r10
 525 00fa 9F90      		pop r9
 526 00fc 0895      		ret
 527               	.LVL28:
 528               	.L32:
  84:../../tmk_core/common/action_tapping.c ****             if (tapping_key.tap.count == 0) {
 529               		.loc 1 84 13 discriminator 2 view .LVU104
 530 00fe 8095      		com r24
 531 0100 9095      		com r25
 532 0102 800F      		add r24,r16
 533 0104 911F      		adc r25,r17
 534 0106 00C0      		rjmp .L120
 535               	.LVL29:
 536               	.L38:
 116:../../tmk_core/common/action_tapping.c ****                     // Modifier should be retained till end of this tapping.
 537               		.loc 1 116 22 is_stmt 1 view .LVU105
 538               	.LBB32:
 539               	.LBI32:
  50:../../tmk_core/common/keyboard.h **** static inline bool IS_PRESSED(keyevent_t event) { return (!IS_NOEVENT(event) && event.pressed); }
  51:../../tmk_core/common/keyboard.h **** static inline bool IS_RELEASED(keyevent_t event) { return (!IS_NOEVENT(event) && !event.pressed); }
 540               		.loc 2 51 20 view .LVU106
 541               	.LBB33:
 542               		.loc 2 51 52 view .LVU107
 543               	.LBB34:
 544               	.LBI34:
  49:../../tmk_core/common/keyboard.h **** static inline bool IS_PRESSED(keyevent_t event) { return (!IS_NOEVENT(event) && event.pressed); }
 545               		.loc 2 49 20 view .LVU108
 546               	.LBB35:
  49:../../tmk_core/common/keyboard.h **** static inline bool IS_PRESSED(keyevent_t event) { return (!IS_NOEVENT(event) && event.pressed); }
 547               		.loc 2 49 51 view .LVU109
  49:../../tmk_core/common/keyboard.h **** static inline bool IS_PRESSED(keyevent_t event) { return (!IS_NOEVENT(event) && event.pressed); }
 548               		.loc 2 49 74 is_stmt 0 view .LVU110
 549 0108 0115      		cp r16,__zero_reg__
 550 010a 1105      		cpc r17,__zero_reg__
 551 010c 01F0      		breq .L69
 552 010e 842F      		mov r24,r20
 553 0110 8523      		and r24,r21
 554 0112 8F3F      		cpi r24,lo8(-1)
 555 0114 01F0      		breq .+2
 556 0116 00C0      		rjmp .L41
 557               	.L69:
  49:../../tmk_core/common/keyboard.h **** static inline bool IS_PRESSED(keyevent_t event) { return (!IS_NOEVENT(event) && event.pressed); }
 558               		.loc 2 49 74 view .LVU111
 559               	.LBE35:
 560               	.LBE34:
 561               		.loc 2 51 79 view .LVU112
 562 0118 80E0      		ldi r24,0
 563               	.L40:
 564               	.LVL30:
 565               		.loc 2 51 79 view .LVU113
 566               	.LBE33:
 567               	.LBE32:
 116:../../tmk_core/common/action_tapping.c ****                     // Modifier should be retained till end of this tapping.
 568               		.loc 1 116 25 view .LVU114
 569 011a B82F      		mov r27,r24
 570 011c B170      		andi r27,lo8(1)
 571 011e BB2E      		mov r11,r27
 572               	.LBB37:
 573               	.LBB38:
 318:../../tmk_core/common/action_tapping.c ****         if (KEYEQ(event.key, waiting_buffer[i].event.key) && event.pressed !=  waiting_buffer[i].ev
 574               		.loc 1 318 18 view .LVU115
 575 0120 E091 0000 		lds r30,waiting_buffer_tail
 576               	.LVL31:
 318:../../tmk_core/common/action_tapping.c ****         if (KEYEQ(event.key, waiting_buffer[i].event.key) && event.pressed !=  waiting_buffer[i].ev
 577               		.loc 1 318 45 view .LVU116
 578 0124 2091 0000 		lds r18,waiting_buffer_head
 319:../../tmk_core/common/action_tapping.c ****             return true;
 579               		.loc 1 319 13 view .LVU117
 580 0128 36E0      		ldi r19,lo8(6)
 581               	.LBE38:
 582               	.LBE37:
 116:../../tmk_core/common/action_tapping.c ****                     // Modifier should be retained till end of this tapping.
 583               		.loc 1 116 25 view .LVU118
 584 012a 80FD      		sbrc r24,0
 585 012c 00C0      		rjmp .L43
 586               	.LVL32:
 587               	.L42:
 138:../../tmk_core/common/action_tapping.c ****                         tapping_key.tap.interrupted = true;
 588               		.loc 1 138 21 is_stmt 1 view .LVU119
 138:../../tmk_core/common/action_tapping.c ****                         tapping_key.tap.interrupted = true;
 589               		.loc 1 138 24 is_stmt 0 view .LVU120
 590 012e DD20      		tst r13
 591 0130 01F0      		breq .L29
 139:../../tmk_core/common/action_tapping.c ****                     }
 592               		.loc 1 139 25 is_stmt 1 view .LVU121
 139:../../tmk_core/common/action_tapping.c ****                     }
 593               		.loc 1 139 53 is_stmt 0 view .LVU122
 594 0132 8091 0000 		lds r24,tapping_key+5
 595 0136 8160      		ori r24,lo8(1<<0)
 596 0138 8093 0000 		sts tapping_key+5,r24
 142:../../tmk_core/common/action_tapping.c ****                 }
 597               		.loc 1 142 28 view .LVU123
 598 013c C12C      		mov r12,__zero_reg__
 599               	.LVL33:
 142:../../tmk_core/common/action_tapping.c ****                 }
 600               		.loc 1 142 28 view .LVU124
 601 013e 00C0      		rjmp .L29
 602               	.LVL34:
 603               	.L45:
 604               	.LBB40:
 605               	.LBB39:
 319:../../tmk_core/common/action_tapping.c ****             return true;
 606               		.loc 1 319 9 is_stmt 1 view .LVU125
 319:../../tmk_core/common/action_tapping.c ****             return true;
 607               		.loc 1 319 13 is_stmt 0 view .LVU126
 608 0140 8E2F      		mov r24,r30
 609 0142 90E0      		ldi r25,0
 610 0144 3E9F      		mul r19,r30
 611 0146 F001      		movw r30,r0
 612 0148 1124      		clr __zero_reg__
 613               	.LVL35:
 319:../../tmk_core/common/action_tapping.c ****             return true;
 614               		.loc 1 319 13 view .LVU127
 615 014a E050      		subi r30,lo8(-(waiting_buffer))
 616 014c F040      		sbci r31,hi8(-(waiting_buffer))
 319:../../tmk_core/common/action_tapping.c ****             return true;
 617               		.loc 1 319 12 view .LVU128
 618 014e 6181      		ldd r22,Z+1
 619 0150 6513      		cpse r22,r21
 620 0152 00C0      		rjmp .L44
 319:../../tmk_core/common/action_tapping.c ****             return true;
 621               		.loc 1 319 13 view .LVU129
 622 0154 6081      		ld r22,Z
 623 0156 6413      		cpse r22,r20
 624 0158 00C0      		rjmp .L44
 319:../../tmk_core/common/action_tapping.c ****             return true;
 625               		.loc 1 319 59 view .LVU130
 626 015a 6281      		ldd r22,Z+2
 627 015c 6D11      		cpse r22,r13
 628 015e 00C0      		rjmp .L42
 629               	.L44:
 318:../../tmk_core/common/action_tapping.c ****         if (KEYEQ(event.key, waiting_buffer[i].event.key) && event.pressed !=  waiting_buffer[i].ev
 630               		.loc 1 318 69 is_stmt 1 view .LVU131
 318:../../tmk_core/common/action_tapping.c ****         if (KEYEQ(event.key, waiting_buffer[i].event.key) && event.pressed !=  waiting_buffer[i].ev
 631               		.loc 1 318 76 is_stmt 0 view .LVU132
 632 0160 FC01      		movw r30,r24
 633 0162 3196      		adiw r30,1
 318:../../tmk_core/common/action_tapping.c ****         if (KEYEQ(event.key, waiting_buffer[i].event.key) && event.pressed !=  waiting_buffer[i].ev
 634               		.loc 1 318 71 view .LVU133
 635 0164 E770      		andi r30,lo8(7)
 636               	.LVL36:
 637               	.L43:
 318:../../tmk_core/common/action_tapping.c ****         if (KEYEQ(event.key, waiting_buffer[i].event.key) && event.pressed !=  waiting_buffer[i].ev
 638               		.loc 1 318 43 is_stmt 1 view .LVU134
 318:../../tmk_core/common/action_tapping.c ****         if (KEYEQ(event.key, waiting_buffer[i].event.key) && event.pressed !=  waiting_buffer[i].ev
 639               		.loc 1 318 5 is_stmt 0 view .LVU135
 640 0166 E213      		cpse r30,r18
 641 0168 00C0      		rjmp .L45
 642               	.LVL37:
 318:../../tmk_core/common/action_tapping.c ****         if (KEYEQ(event.key, waiting_buffer[i].event.key) && event.pressed !=  waiting_buffer[i].ev
 643               		.loc 1 318 5 view .LVU136
 644               	.LBE39:
 645               	.LBE40:
 646               	.LBB41:
 118:../../tmk_core/common/action_tapping.c ****                     switch (action.kind.id) {
 647               		.loc 1 118 21 is_stmt 1 view .LVU137
 118:../../tmk_core/common/action_tapping.c ****                     switch (action.kind.id) {
 648               		.loc 1 118 39 is_stmt 0 view .LVU138
 649 016a 702F      		mov r23,r16
 650 016c 1B87      		std Y+11,r17
 651 016e 0A87      		std Y+10,r16
 652 0170 6D2D      		mov r22,r13
 653 0172 8B85      		ldd r24,Y+11
 654 0174 0E94 0000 		call layer_switch_get_action
 655               	.LVL38:
 119:../../tmk_core/common/action_tapping.c ****                         case ACT_LMODS:
 656               		.loc 1 119 21 is_stmt 1 view .LVU139
 119:../../tmk_core/common/action_tapping.c ****                         case ACT_LMODS:
 657               		.loc 1 119 40 is_stmt 0 view .LVU140
 658 0178 292F      		mov r18,r25
 659 017a 2295      		swap r18
 660 017c 2F70      		andi r18,lo8(15)
 119:../../tmk_core/common/action_tapping.c ****                         case ACT_LMODS:
 661               		.loc 1 119 21 view .LVU141
 662 017e 9032      		cpi r25,lo8(32)
 663 0180 00F0      		brlo .L67
 119:../../tmk_core/common/action_tapping.c ****                         case ACT_LMODS:
 664               		.loc 1 119 21 view .LVU142
 665 0182 225F      		subi r18,lo8(-(14))
 666 0184 2F70      		andi r18,lo8(15)
 667 0186 2230      		cpi r18,lo8(2)
 668 0188 00F4      		brsh .L49
 127:../../tmk_core/common/action_tapping.c ****                             if (IS_MOD(action.key.code)) return false;
 669               		.loc 1 127 29 is_stmt 1 view .LVU143
 127:../../tmk_core/common/action_tapping.c ****                             if (IS_MOD(action.key.code)) return false;
 670               		.loc 1 127 33 is_stmt 0 view .LVU144
 671 018a 9F70      		andi r25,lo8(15)
 672               	.LVL39:
 127:../../tmk_core/common/action_tapping.c ****                             if (IS_MOD(action.key.code)) return false;
 673               		.loc 1 127 32 view .LVU145
 674 018c 01F0      		breq .L50
 127:../../tmk_core/common/action_tapping.c ****                             if (IS_MOD(action.key.code)) return false;
 675               		.loc 1 127 68 discriminator 1 view .LVU146
 676 018e F701      		movw r30,r14
 677 0190 9581      		ldd r25,Z+5
 678 0192 907F      		andi r25,lo8(-16)
 127:../../tmk_core/common/action_tapping.c ****                             if (IS_MOD(action.key.code)) return false;
 679               		.loc 1 127 49 discriminator 1 view .LVU147
 680 0194 01F4      		brne .L50
 681               	.LVL40:
 682               	.L73:
 122:../../tmk_core/common/action_tapping.c ****                             if (IS_MOD(action.key.code)) return false;
 683               		.loc 1 122 77 view .LVU148
 684 0196 B12C      		mov r11,__zero_reg__
 685 0198 00C0      		rjmp .L48
 686               	.LVL41:
 687               	.L67:
 122:../../tmk_core/common/action_tapping.c ****                             if (IS_MOD(action.key.code)) return false;
 688               		.loc 1 122 29 is_stmt 1 view .LVU149
 122:../../tmk_core/common/action_tapping.c ****                             if (IS_MOD(action.key.code)) return false;
 689               		.loc 1 122 33 is_stmt 0 view .LVU150
 690 019a 9F70      		andi r25,lo8(15)
 691               	.LVL42:
 122:../../tmk_core/common/action_tapping.c ****                             if (IS_MOD(action.key.code)) return false;
 692               		.loc 1 122 32 view .LVU151
 693 019c 01F0      		breq .L50
 122:../../tmk_core/common/action_tapping.c ****                             if (IS_MOD(action.key.code)) return false;
 694               		.loc 1 122 49 discriminator 1 view .LVU152
 695 019e 8823      		tst r24
 696 01a0 01F0      		breq .L73
 697               	.L50:
 128:../../tmk_core/common/action_tapping.c ****                             break;
 698               		.loc 1 128 29 is_stmt 1 view .LVU153
 128:../../tmk_core/common/action_tapping.c ****                             break;
 699               		.loc 1 128 33 is_stmt 0 view .LVU154
 700 01a2 805E      		subi r24,lo8(-(32))
 701               	.LVL43:
 128:../../tmk_core/common/action_tapping.c ****                             break;
 702               		.loc 1 128 32 view .LVU155
 703 01a4 8830      		cpi r24,lo8(8)
 704 01a6 00F0      		brlo .L73
 705               	.LVL44:
 706               	.L49:
 132:../../tmk_core/common/action_tapping.c ****                     process_action(keyp);
 707               		.loc 1 132 21 is_stmt 1 view .LVU156
 133:../../tmk_core/common/action_tapping.c ****                     return true;
 708               		.loc 1 133 21 view .LVU157
 709 01a8 C701      		movw r24,r14
 710               	.LVL45:
 133:../../tmk_core/common/action_tapping.c ****                     return true;
 711               		.loc 1 133 21 is_stmt 0 view .LVU158
 712 01aa 0E94 0000 		call process_action
 713               	.LVL46:
 134:../../tmk_core/common/action_tapping.c ****                 }
 714               		.loc 1 134 21 is_stmt 1 view .LVU159
 715               	.L48:
 134:../../tmk_core/common/action_tapping.c ****                 }
 716               		.loc 1 134 21 is_stmt 0 view .LVU160
 717 01ae CB2C      		mov r12,r11
 718               	.LVL47:
 134:../../tmk_core/common/action_tapping.c ****                 }
 719               		.loc 1 134 21 view .LVU161
 720 01b0 00C0      		rjmp .L29
 721               	.LVL48:
 722               	.L37:
 134:../../tmk_core/common/action_tapping.c ****                 }
 723               		.loc 1 134 21 view .LVU162
 724               	.LBE41:
 147:../../tmk_core/common/action_tapping.c ****                     debug("Tapping: Tap release("); debug_dec(tapping_key.tap.count); debug(")\n");
 725               		.loc 1 147 17 is_stmt 1 discriminator 1 view .LVU163
 147:../../tmk_core/common/action_tapping.c ****                     debug("Tapping: Tap release("); debug_dec(tapping_key.tap.count); debug(")\n");
 726               		.loc 1 147 21 is_stmt 0 discriminator 1 view .LVU164
 727 01b2 3513      		cpse r19,r21
 728 01b4 00C0      		rjmp .L51
 147:../../tmk_core/common/action_tapping.c ****                     debug("Tapping: Tap release("); debug_dec(tapping_key.tap.count); debug(")\n");
 729               		.loc 1 147 21 discriminator 2 view .LVU165
 730 01b6 2413      		cpse r18,r20
 731 01b8 00C0      		rjmp .L51
 149:../../tmk_core/common/action_tapping.c ****                     process_action(keyp);
 732               		.loc 1 149 31 discriminator 3 view .LVU166
 733 01ba D701      		movw r26,r14
 147:../../tmk_core/common/action_tapping.c ****                     debug("Tapping: Tap release("); debug_dec(tapping_key.tap.count); debug(")\n");
 734               		.loc 1 147 47 discriminator 3 view .LVU167
 735 01bc DD20      		tst r13
 736 01be 01F4      		brne .+2
 737 01c0 00C0      		rjmp .L127
 738               	.L51:
 155:../../tmk_core/common/action_tapping.c ****                     if (tapping_key.tap.count > 1) {
 739               		.loc 1 155 22 is_stmt 1 view .LVU168
 155:../../tmk_core/common/action_tapping.c ****                     if (tapping_key.tap.count > 1) {
 740               		.loc 1 155 26 is_stmt 0 view .LVU169
 741 01c2 4F83      		std Y+7,r20
 742 01c4 5887      		std Y+8,r21
 743 01c6 D986      		std Y+9,r13
 744 01c8 702F      		mov r23,r16
 745 01ca 1B87      		std Y+11,r17
 746 01cc 0A87      		std Y+10,r16
 747 01ce 6D2D      		mov r22,r13
 748 01d0 8B85      		ldd r24,Y+11
 749 01d2 0E94 0000 		call is_tap_key
 750               	.LVL49:
 155:../../tmk_core/common/action_tapping.c ****                     if (tapping_key.tap.count > 1) {
 751               		.loc 1 155 25 view .LVU170
 752 01d6 8823      		tst r24
 753 01d8 01F4      		brne .+2
 754 01da 00C0      		rjmp .L63
 155:../../tmk_core/common/action_tapping.c ****                     if (tapping_key.tap.count > 1) {
 755               		.loc 1 155 44 discriminator 1 view .LVU171
 756 01dc DD20      		tst r13
 757 01de 01F4      		brne .+2
 758 01e0 00C0      		rjmp .L63
 156:../../tmk_core/common/action_tapping.c ****                         debug("Tapping: Start new tap with releasing last tap(>1).\n");
 759               		.loc 1 156 21 is_stmt 1 view .LVU172
 156:../../tmk_core/common/action_tapping.c ****                         debug("Tapping: Start new tap with releasing last tap(>1).\n");
 760               		.loc 1 156 40 is_stmt 0 view .LVU173
 761 01e2 8091 0000 		lds r24,tapping_key+5
 156:../../tmk_core/common/action_tapping.c ****                         debug("Tapping: Start new tap with releasing last tap(>1).\n");
 762               		.loc 1 156 24 view .LVU174
 763 01e6 8032      		cpi r24,lo8(32)
 764 01e8 00F0      		brlo .L54
 765               	.LBB42:
 157:../../tmk_core/common/action_tapping.c ****                         // unregister key
 766               		.loc 1 157 25 is_stmt 1 view .LVU175
 159:../../tmk_core/common/action_tapping.c ****                                 .tap = tapping_key.tap,
 767               		.loc 1 159 25 view .LVU176
 159:../../tmk_core/common/action_tapping.c ****                                 .tap = tapping_key.tap,
 768               		.loc 1 159 54 is_stmt 0 view .LVU177
 769 01ea 2091 0000 		lds r18,tapping_key
 770 01ee 3091 0000 		lds r19,tapping_key+1
 771 01f2 3A83      		std Y+2,r19
 772 01f4 2983      		std Y+1,r18
 773 01f6 1B82      		std Y+3,__zero_reg__
 774 01f8 1D83      		std Y+5,r17
 775 01fa 0C83      		std Y+4,r16
 776 01fc 8E83      		std Y+6,r24
 159:../../tmk_core/common/action_tapping.c ****                                 .tap = tapping_key.tap,
 777               		.loc 1 159 25 view .LVU178
 778 01fe CE01      		movw r24,r28
 779 0200 0196      		adiw r24,1
 780 0202 0E94 0000 		call process_action
 781               	.LVL50:
 782               	.L54:
 159:../../tmk_core/common/action_tapping.c ****                                 .tap = tapping_key.tap,
 783               		.loc 1 159 25 view .LVU179
 784               	.LBE42:
 166:../../tmk_core/common/action_tapping.c ****                     }
 785               		.loc 1 166 25 is_stmt 1 view .LVU180
 168:../../tmk_core/common/action_tapping.c ****                     waiting_buffer_scan_tap();
 786               		.loc 1 168 21 view .LVU181
 168:../../tmk_core/common/action_tapping.c ****                     waiting_buffer_scan_tap();
 787               		.loc 1 168 33 is_stmt 0 view .LVU182
 788 0206 86E0      		ldi r24,lo8(6)
 789 0208 F701      		movw r30,r14
 790 020a A0E0      		ldi r26,lo8(tapping_key)
 791 020c B0E0      		ldi r27,hi8(tapping_key)
 792               		0:
 793 020e 0190      		ld r0,Z+
 794 0210 0D92      		st X+,r0
 795 0212 8A95      		dec r24
 796 0214 01F4      		brne 0b
 169:../../tmk_core/common/action_tapping.c ****                     debug_tapping_key();
 797               		.loc 1 169 21 is_stmt 1 view .LVU183
 798 0216 0E94 0000 		call waiting_buffer_scan_tap
 799               	.LVL51:
 170:../../tmk_core/common/action_tapping.c ****                     return true;
 800               		.loc 1 170 21 view .LVU184
 801 021a 0E94 0000 		call debug_tapping_key
 802               	.LVL52:
 171:../../tmk_core/common/action_tapping.c ****                 }
 803               		.loc 1 171 21 view .LVU185
 804               	.L124:
 178:../../tmk_core/common/action_tapping.c ****                 }
 805               		.loc 1 178 21 view .LVU186
 178:../../tmk_core/common/action_tapping.c ****                 }
 806               		.loc 1 178 28 is_stmt 0 view .LVU187
 807 021e CC24      		clr r12
 808 0220 C394      		inc r12
 809 0222 00C0      		rjmp .L29
 810               	.LVL53:
 811               	.L36:
 184:../../tmk_core/common/action_tapping.c ****                 debug("Tapping: End. Timeout. Not tap(0): ");
 812               		.loc 1 184 13 is_stmt 1 view .LVU188
 184:../../tmk_core/common/action_tapping.c ****                 debug("Tapping: End. Timeout. Not tap(0): ");
 813               		.loc 1 184 16 is_stmt 0 view .LVU189
 814 0224 9111      		cpse r25,__zero_reg__
 815 0226 00C0      		rjmp .L55
 816               	.LBB43:
 185:../../tmk_core/common/action_tapping.c ****                 debug_event(event); debug("\n");
 817               		.loc 1 185 17 is_stmt 1 view .LVU190
 186:../../tmk_core/common/action_tapping.c ****                 process_action(&tapping_key);
 818               		.loc 1 186 17 view .LVU191
 186:../../tmk_core/common/action_tapping.c ****                 process_action(&tapping_key);
 819               		.loc 1 186 17 is_stmt 0 view .LVU192
 820 0228 702F      		mov r23,r16
 821 022a 1B87      		std Y+11,r17
 822 022c 0A87      		std Y+10,r16
 823 022e 6D2D      		mov r22,r13
 824 0230 8B85      		ldd r24,Y+11
 825 0232 0E94 0000 		call debug_event
 826               	.LVL54:
 186:../../tmk_core/common/action_tapping.c ****                 process_action(&tapping_key);
 827               		.loc 1 186 37 is_stmt 1 view .LVU193
 187:../../tmk_core/common/action_tapping.c ****                 tapping_key = (keyrecord_t){};
 828               		.loc 1 187 17 view .LVU194
 829 0236 80E0      		ldi r24,lo8(tapping_key)
 830 0238 90E0      		ldi r25,hi8(tapping_key)
 831 023a 0E94 0000 		call process_action
 832               	.LVL55:
 188:../../tmk_core/common/action_tapping.c ****                 debug_tapping_key();
 833               		.loc 1 188 17 view .LVU195
 188:../../tmk_core/common/action_tapping.c ****                 debug_tapping_key();
 834               		.loc 1 188 29 is_stmt 0 view .LVU196
 835 023e 86E0      		ldi r24,lo8(6)
 836 0240 F501      		movw r30,r10
 837               		0:
 838 0242 1192      		st Z+,__zero_reg__
 839 0244 8A95      		dec r24
 840 0246 01F4      		brne 0b
 841               	.L123:
 189:../../tmk_core/common/action_tapping.c ****                 return false;
 842               		.loc 1 189 17 is_stmt 1 view .LVU197
 843 0248 0E94 0000 		call debug_tapping_key
 844               	.LVL56:
 190:../../tmk_core/common/action_tapping.c ****             }  else {
 845               		.loc 1 190 17 view .LVU198
 846 024c 00C0      		rjmp .L29
 847               	.LVL57:
 848               	.L55:
 190:../../tmk_core/common/action_tapping.c ****             }  else {
 849               		.loc 1 190 17 is_stmt 0 view .LVU199
 850               	.LBE43:
 192:../../tmk_core/common/action_tapping.c ****                     debug("Tapping: End. last timeout tap release(>0).");
 851               		.loc 1 192 17 is_stmt 1 discriminator 1 view .LVU200
 192:../../tmk_core/common/action_tapping.c ****                     debug("Tapping: End. last timeout tap release(>0).");
 852               		.loc 1 192 21 is_stmt 0 discriminator 1 view .LVU201
 853 024e 3513      		cpse r19,r21
 854 0250 00C0      		rjmp .L51
 192:../../tmk_core/common/action_tapping.c ****                     debug("Tapping: End. last timeout tap release(>0).");
 855               		.loc 1 192 21 discriminator 2 view .LVU202
 856 0252 2413      		cpse r18,r20
 857 0254 00C0      		rjmp .L51
 192:../../tmk_core/common/action_tapping.c ****                     debug("Tapping: End. last timeout tap release(>0).");
 858               		.loc 1 192 47 discriminator 3 view .LVU203
 859 0256 D110      		cpse r13,__zero_reg__
 860 0258 00C0      		rjmp .L51
 861               	.LBB44:
 193:../../tmk_core/common/action_tapping.c ****                     keyp->tap = tapping_key.tap;
 862               		.loc 1 193 21 is_stmt 1 view .LVU204
 194:../../tmk_core/common/action_tapping.c ****                     process_action(keyp);
 863               		.loc 1 194 21 view .LVU205
 194:../../tmk_core/common/action_tapping.c ****                     process_action(keyp);
 864               		.loc 1 194 31 is_stmt 0 view .LVU206
 865 025a D701      		movw r26,r14
 866 025c 1596      		adiw r26,5
 867 025e 8C93      		st X,r24
 195:../../tmk_core/common/action_tapping.c ****                     tapping_key = (keyrecord_t){};
 868               		.loc 1 195 21 is_stmt 1 view .LVU207
 869 0260 C701      		movw r24,r14
 870 0262 0E94 0000 		call process_action
 871               	.LVL58:
 196:../../tmk_core/common/action_tapping.c ****                     return true;
 872               		.loc 1 196 21 view .LVU208
 196:../../tmk_core/common/action_tapping.c ****                     return true;
 873               		.loc 1 196 33 is_stmt 0 view .LVU209
 874 0266 86E0      		ldi r24,lo8(6)
 875 0268 F501      		movw r30,r10
 876               		0:
 877 026a 1192      		st Z+,__zero_reg__
 878 026c 8A95      		dec r24
 879 026e 01F4      		brne 0b
 197:../../tmk_core/common/action_tapping.c ****                 }
 880               		.loc 1 197 21 is_stmt 1 view .LVU210
 197:../../tmk_core/common/action_tapping.c ****                 }
 881               		.loc 1 197 28 is_stmt 0 view .LVU211
 882 0270 C92C      		mov r12,r9
 883 0272 00C0      		rjmp .L29
 884               	.LVL59:
 885               	.L31:
 197:../../tmk_core/common/action_tapping.c ****                 }
 886               		.loc 1 197 28 view .LVU212
 887               	.LBE44:
 226:../../tmk_core/common/action_tapping.c ****         if (WITHIN_TAPPING_TERM(event)) {
 888               		.loc 1 226 12 is_stmt 1 discriminator 1 view .LVU213
 227:../../tmk_core/common/action_tapping.c ****             if (event.pressed) {
 889               		.loc 1 227 9 discriminator 1 view .LVU214
 227:../../tmk_core/common/action_tapping.c ****             if (event.pressed) {
 890               		.loc 1 227 13 is_stmt 0 discriminator 1 view .LVU215
 891 0274 0817      		cp r16,r24
 892 0276 1907      		cpc r17,r25
 893 0278 00F0      		brlo .L58
 894 027a B801      		movw r22,r16
 895 027c 681B      		sub r22,r24
 896 027e 790B      		sbc r23,r25
 897 0280 CB01      		movw r24,r22
 898               	.L129:
 227:../../tmk_core/common/action_tapping.c ****             if (event.pressed) {
 899               		.loc 1 227 13 discriminator 2 view .LVU216
 900 0282 C12C      		mov r12,__zero_reg__
 901 0284 883C      		cpi r24,-56
 902 0286 9105      		cpc r25,__zero_reg__
 903 0288 00F0      		brlo .+2
 904 028a 00C0      		rjmp .L62
 228:../../tmk_core/common/action_tapping.c ****                 if (IS_TAPPING_KEY(event.key)) {
 905               		.loc 1 228 13 is_stmt 1 view .LVU217
 228:../../tmk_core/common/action_tapping.c ****                 if (IS_TAPPING_KEY(event.key)) {
 906               		.loc 1 228 22 is_stmt 0 view .LVU218
 907 028c CD2C      		mov r12,r13
 228:../../tmk_core/common/action_tapping.c ****                 if (IS_TAPPING_KEY(event.key)) {
 908               		.loc 1 228 16 view .LVU219
 909 028e DD20      		tst r13
 910 0290 01F4      		brne .+2
 911 0292 00C0      		rjmp .L63
 912               	.LVL60:
 229:../../tmk_core/common/action_tapping.c ****                     if (!tapping_key.tap.interrupted && tapping_key.tap.count > 0) {
 913               		.loc 1 229 17 is_stmt 1 discriminator 1 view .LVU220
 229:../../tmk_core/common/action_tapping.c ****                     if (!tapping_key.tap.interrupted && tapping_key.tap.count > 0) {
 914               		.loc 1 229 21 is_stmt 0 discriminator 1 view .LVU221
 915 0294 3513      		cpse r19,r21
 916 0296 00C0      		rjmp .L64
 229:../../tmk_core/common/action_tapping.c ****                     if (!tapping_key.tap.interrupted && tapping_key.tap.count > 0) {
 917               		.loc 1 229 21 discriminator 2 view .LVU222
 918 0298 2413      		cpse r18,r20
 919 029a 00C0      		rjmp .L64
 230:../../tmk_core/common/action_tapping.c ****                         // sequential tap.
 920               		.loc 1 230 21 is_stmt 1 view .LVU223
 230:../../tmk_core/common/action_tapping.c ****                         // sequential tap.
 921               		.loc 1 230 41 is_stmt 0 view .LVU224
 922 029c 8091 0000 		lds r24,tapping_key+5
 230:../../tmk_core/common/action_tapping.c ****                         // sequential tap.
 923               		.loc 1 230 24 view .LVU225
 924 02a0 80FD      		sbrc r24,0
 925 02a2 00C0      		rjmp .L65
 230:../../tmk_core/common/action_tapping.c ****                         // sequential tap.
 926               		.loc 1 230 79 discriminator 1 view .LVU226
 927 02a4 982F      		mov r25,r24
 928 02a6 907F      		andi r25,lo8(-16)
 230:../../tmk_core/common/action_tapping.c ****                         // sequential tap.
 929               		.loc 1 230 54 discriminator 1 view .LVU227
 930 02a8 01F0      		breq .L65
 232:../../tmk_core/common/action_tapping.c ****                         if (keyp->tap.count < 15) keyp->tap.count += 1;
 931               		.loc 1 232 25 is_stmt 1 view .LVU228
 232:../../tmk_core/common/action_tapping.c ****                         if (keyp->tap.count < 15) keyp->tap.count += 1;
 932               		.loc 1 232 35 is_stmt 0 view .LVU229
 933 02aa D701      		movw r26,r14
 934 02ac 1596      		adiw r26,5
 935 02ae 8C93      		st X,r24
 936 02b0 1597      		sbiw r26,5
 233:../../tmk_core/common/action_tapping.c ****                         debug("Tapping: Tap press("); debug_dec(keyp->tap.count); debug(")\n");
 937               		.loc 1 233 25 is_stmt 1 view .LVU230
 233:../../tmk_core/common/action_tapping.c ****                         debug("Tapping: Tap press("); debug_dec(keyp->tap.count); debug(")\n");
 938               		.loc 1 233 28 is_stmt 0 view .LVU231
 939 02b2 903F      		cpi r25,lo8(-16)
 940 02b4 01F0      		breq .L66
 233:../../tmk_core/common/action_tapping.c ****                         debug("Tapping: Tap press("); debug_dec(keyp->tap.count); debug(")\n");
 941               		.loc 1 233 51 is_stmt 1 discriminator 1 view .LVU232
 233:../../tmk_core/common/action_tapping.c ****                         debug("Tapping: Tap press("); debug_dec(keyp->tap.count); debug(")\n");
 942               		.loc 1 233 67 is_stmt 0 discriminator 1 view .LVU233
 943 02b6 982F      		mov r25,r24
 944 02b8 907F      		andi r25,lo8(-16)
 945 02ba 905F      		subi r25,lo8(-(16))
 946 02bc 8F70      		andi r24,lo8(15)
 947 02be 892B      		or r24,r25
 948               	.LVL61:
 949               	.L127:
 233:../../tmk_core/common/action_tapping.c ****                         debug("Tapping: Tap press("); debug_dec(keyp->tap.count); debug(")\n");
 950               		.loc 1 233 67 discriminator 1 view .LVU234
 951 02c0 1596      		adiw r26,5
 952 02c2 8C93      		st X,r24
 953               	.L66:
 234:../../tmk_core/common/action_tapping.c ****                         process_action(keyp);
 954               		.loc 1 234 25 is_stmt 1 view .LVU235
 234:../../tmk_core/common/action_tapping.c ****                         process_action(keyp);
 955               		.loc 1 234 55 view .LVU236
 234:../../tmk_core/common/action_tapping.c ****                         process_action(keyp);
 956               		.loc 1 234 83 view .LVU237
 235:../../tmk_core/common/action_tapping.c ****                         tapping_key = *keyp;
 957               		.loc 1 235 25 view .LVU238
 958 02c4 C701      		movw r24,r14
 959 02c6 0E94 0000 		call process_action
 960               	.LVL62:
 236:../../tmk_core/common/action_tapping.c ****                         debug_tapping_key();
 961               		.loc 1 236 25 view .LVU239
 236:../../tmk_core/common/action_tapping.c ****                         debug_tapping_key();
 962               		.loc 1 236 37 is_stmt 0 view .LVU240
 963 02ca 86E0      		ldi r24,lo8(6)
 964 02cc F701      		movw r30,r14
 965 02ce A0E0      		ldi r26,lo8(tapping_key)
 966 02d0 B0E0      		ldi r27,hi8(tapping_key)
 967               		0:
 968 02d2 0190      		ld r0,Z+
 969 02d4 0D92      		st X+,r0
 970 02d6 8A95      		dec r24
 971 02d8 01F4      		brne 0b
 237:../../tmk_core/common/action_tapping.c ****                         return true;
 972               		.loc 1 237 25 is_stmt 1 view .LVU241
 973 02da 00C0      		rjmp .L123
 974               	.LVL63:
 975               	.L58:
 227:../../tmk_core/common/action_tapping.c ****             if (event.pressed) {
 976               		.loc 1 227 13 is_stmt 0 discriminator 2 view .LVU242
 977 02dc 8095      		com r24
 978 02de 9095      		com r25
 979 02e0 800F      		add r24,r16
 980 02e2 911F      		adc r25,r17
 981 02e4 00C0      		rjmp .L129
 982               	.LVL64:
 983               	.L65:
 241:../../tmk_core/common/action_tapping.c ****                         return true;
 984               		.loc 1 241 25 is_stmt 1 view .LVU243
 241:../../tmk_core/common/action_tapping.c ****                         return true;
 985               		.loc 1 241 37 is_stmt 0 view .LVU244
 986 02e6 86E0      		ldi r24,lo8(6)
 987 02e8 F701      		movw r30,r14
 988 02ea A0E0      		ldi r26,lo8(tapping_key)
 989 02ec B0E0      		ldi r27,hi8(tapping_key)
 990               		0:
 991 02ee 0190      		ld r0,Z+
 992 02f0 0D92      		st X+,r0
 993 02f2 8A95      		dec r24
 994 02f4 01F4      		brne 0b
 242:../../tmk_core/common/action_tapping.c ****                     }
 995               		.loc 1 242 25 is_stmt 1 view .LVU245
 242:../../tmk_core/common/action_tapping.c ****                     }
 996               		.loc 1 242 32 is_stmt 0 view .LVU246
 997 02f6 00C0      		rjmp .L29
 998               	.L64:
 244:../../tmk_core/common/action_tapping.c ****                     // Sequential tap can be interfered with other tap key.
 999               		.loc 1 244 24 is_stmt 1 view .LVU247
 244:../../tmk_core/common/action_tapping.c ****                     // Sequential tap can be interfered with other tap key.
 1000               		.loc 1 244 28 is_stmt 0 view .LVU248
 1001 02f8 4F83      		std Y+7,r20
 1002 02fa 5887      		std Y+8,r21
 1003 02fc D986      		std Y+9,r13
 1004 02fe 702F      		mov r23,r16
 1005 0300 1B87      		std Y+11,r17
 1006 0302 0A87      		std Y+10,r16
 1007 0304 6D2D      		mov r22,r13
 1008 0306 8B85      		ldd r24,Y+11
 1009 0308 0E94 0000 		call is_tap_key
 1010               	.LVL65:
 244:../../tmk_core/common/action_tapping.c ****                     // Sequential tap can be interfered with other tap key.
 1011               		.loc 1 244 27 view .LVU249
 1012 030c 8111      		cpse r24,__zero_reg__
 1013 030e 00C0      		rjmp .L54
 254:../../tmk_core/common/action_tapping.c ****                     process_action(keyp);
 1014               		.loc 1 254 21 is_stmt 1 view .LVU250
 254:../../tmk_core/common/action_tapping.c ****                     process_action(keyp);
 1015               		.loc 1 254 49 is_stmt 0 view .LVU251
 1016 0310 8091 0000 		lds r24,tapping_key+5
 1017 0314 8160      		ori r24,lo8(1<<0)
 1018 0316 8093 0000 		sts tapping_key+5,r24
 255:../../tmk_core/common/action_tapping.c ****                     return true;
 1019               		.loc 1 255 21 is_stmt 1 view .LVU252
 1020 031a C701      		movw r24,r14
 1021 031c 0E94 0000 		call process_action
 1022               	.LVL66:
 256:../../tmk_core/common/action_tapping.c ****                 }
 1023               		.loc 1 256 21 view .LVU253
 256:../../tmk_core/common/action_tapping.c ****                 }
 1024               		.loc 1 256 28 is_stmt 0 view .LVU254
 1025 0320 00C0      		rjmp .L29
 1026               	.LVL67:
 1027               	.L62:
 1028               	.LBB45:
 266:../../tmk_core/common/action_tapping.c ****             debug_event(event); debug("\n");
 1029               		.loc 1 266 13 is_stmt 1 view .LVU255
 267:../../tmk_core/common/action_tapping.c ****             tapping_key = (keyrecord_t){};
 1030               		.loc 1 267 13 view .LVU256
 267:../../tmk_core/common/action_tapping.c ****             tapping_key = (keyrecord_t){};
 1031               		.loc 1 267 13 is_stmt 0 view .LVU257
 1032 0322 702F      		mov r23,r16
 1033 0324 1B87      		std Y+11,r17
 1034 0326 0A87      		std Y+10,r16
 1035 0328 6D2D      		mov r22,r13
 1036 032a 8B85      		ldd r24,Y+11
 1037 032c 0E94 0000 		call debug_event
 1038               	.LVL68:
 267:../../tmk_core/common/action_tapping.c ****             tapping_key = (keyrecord_t){};
 1039               		.loc 1 267 33 is_stmt 1 view .LVU258
 268:../../tmk_core/common/action_tapping.c ****             debug_tapping_key();
 1040               		.loc 1 268 13 view .LVU259
 268:../../tmk_core/common/action_tapping.c ****             debug_tapping_key();
 1041               		.loc 1 268 25 is_stmt 0 view .LVU260
 1042 0330 86E0      		ldi r24,lo8(6)
 1043 0332 E0E0      		ldi r30,lo8(tapping_key)
 1044 0334 F0E0      		ldi r31,hi8(tapping_key)
 1045 0336 DF01      		movw r26,r30
 1046               		0:
 1047 0338 1D92      		st X+,__zero_reg__
 1048 033a 8A95      		dec r24
 1049 033c 01F4      		brne 0b
 269:../../tmk_core/common/action_tapping.c ****             return false;
 1050               		.loc 1 269 13 is_stmt 1 view .LVU261
 1051 033e 00C0      		rjmp .L123
 1052               	.LVL69:
 1053               	.L30:
 269:../../tmk_core/common/action_tapping.c ****             return false;
 1054               		.loc 1 269 13 is_stmt 0 view .LVU262
 1055               	.LBE45:
 275:../../tmk_core/common/action_tapping.c ****             debug("Tapping: Start(Press tap key).\n");
 1056               		.loc 1 275 9 is_stmt 1 view .LVU263
 275:../../tmk_core/common/action_tapping.c ****             debug("Tapping: Start(Press tap key).\n");
 1057               		.loc 1 275 12 is_stmt 0 view .LVU264
 1058 0340 DD20      		tst r13
 1059 0342 01F0      		breq .L63
 275:../../tmk_core/common/action_tapping.c ****             debug("Tapping: Start(Press tap key).\n");
 1060               		.loc 1 275 30 discriminator 1 view .LVU265
 1061 0344 4F83      		std Y+7,r20
 1062 0346 5887      		std Y+8,r21
 1063 0348 D986      		std Y+9,r13
 1064 034a 702F      		mov r23,r16
 1065 034c 1B87      		std Y+11,r17
 1066 034e 0A87      		std Y+10,r16
 1067 0350 6D2D      		mov r22,r13
 1068 0352 8B85      		ldd r24,Y+11
 1069 0354 0E94 0000 		call is_tap_key
 1070               	.LVL70:
 275:../../tmk_core/common/action_tapping.c ****             debug("Tapping: Start(Press tap key).\n");
 1071               		.loc 1 275 27 discriminator 1 view .LVU266
 1072 0358 8111      		cpse r24,__zero_reg__
 1073 035a 00C0      		rjmp .L54
 1074               	.LVL71:
 1075               	.L63:
 174:../../tmk_core/common/action_tapping.c ****                         debug("Tapping: key event while last tap(>0).\n");
 1076               		.loc 1 174 21 is_stmt 1 view .LVU267
 175:../../tmk_core/common/action_tapping.c ****                     }
 1077               		.loc 1 175 25 view .LVU268
 177:../../tmk_core/common/action_tapping.c ****                     return true;
 1078               		.loc 1 177 21 view .LVU269
 1079 035c C701      		movw r24,r14
 1080 035e 0E94 0000 		call process_action
 1081               	.LVL72:
 1082 0362 00C0      		rjmp .L124
 1083               	.LVL73:
 1084               	.L41:
 1085               	.LBB46:
 1086               	.LBB36:
 1087               		.loc 2 51 79 is_stmt 0 view .LVU270
 1088 0364 81E0      		ldi r24,lo8(1)
 1089 0366 8D25      		eor r24,r13
 1090 0368 00C0      		rjmp .L40
 1091               	.LBE36:
 1092               	.LBE46:
 1093               		.cfi_endproc
 1094               	.LFE5:
 1096               		.section	.text.action_tapping_process,"ax",@progbits
 1097               	.global	action_tapping_process
 1099               	action_tapping_process:
 1100               	.LFB4:
  39:../../tmk_core/common/action_tapping.c ****     if (process_tapping(&record)) {
 1101               		.loc 1 39 1 is_stmt 1 view -0
 1102               		.cfi_startproc
 1103 0000 1F93      		push r17
 1104               	.LCFI19:
 1105               		.cfi_def_cfa_offset 3
 1106               		.cfi_offset 17, -2
 1107 0002 CF93      		push r28
 1108               	.LCFI20:
 1109               		.cfi_def_cfa_offset 4
 1110               		.cfi_offset 28, -3
 1111 0004 DF93      		push r29
 1112               	.LCFI21:
 1113               		.cfi_def_cfa_offset 5
 1114               		.cfi_offset 29, -4
 1115 0006 CDB7      		in r28,__SP_L__
 1116 0008 DEB7      		in r29,__SP_H__
 1117               	.LCFI22:
 1118               		.cfi_def_cfa_register 28
 1119 000a 2C97      		sbiw r28,12
 1120               	.LCFI23:
 1121               		.cfi_def_cfa_offset 17
 1122 000c 0FB6      		in __tmp_reg__,__SREG__
 1123 000e F894      		cli
 1124 0010 DEBF      		out __SP_H__,r29
 1125 0012 0FBE      		out __SREG__,__tmp_reg__
 1126 0014 CDBF      		out __SP_L__,r28
 1127               	/* prologue: function */
 1128               	/* frame size = 12 */
 1129               	/* stack size = 15 */
 1130               	.L__stack_usage = 15
 1131 0016 4F83      		std Y+7,r20
 1132 0018 5887      		std Y+8,r21
 1133 001a 6987      		std Y+9,r22
 1134 001c 7A87      		std Y+10,r23
 1135 001e 8B87      		std Y+11,r24
 1136 0020 9C87      		std Y+12,r25
  40:../../tmk_core/common/action_tapping.c ****         if (!IS_NOEVENT(record.event)) {
 1137               		.loc 1 40 5 view .LVU272
  40:../../tmk_core/common/action_tapping.c ****         if (!IS_NOEVENT(record.event)) {
 1138               		.loc 1 40 9 is_stmt 0 view .LVU273
 1139 0022 CE01      		movw r24,r28
 1140 0024 0796      		adiw r24,7
 1141 0026 0E94 0000 		call process_tapping
 1142               	.LVL74:
  40:../../tmk_core/common/action_tapping.c ****         if (!IS_NOEVENT(record.event)) {
 1143               		.loc 1 40 8 view .LVU274
 1144 002a 8823      		tst r24
 1145 002c 01F0      		breq .L134
  41:../../tmk_core/common/action_tapping.c ****             debug("processed: "); debug_record(record); debug("\n");
 1146               		.loc 1 41 9 is_stmt 1 view .LVU275
 1147               	.LBB56:
 1148               	.LBI56:
  49:../../tmk_core/common/keyboard.h **** static inline bool IS_PRESSED(keyevent_t event) { return (!IS_NOEVENT(event) && event.pressed); }
 1149               		.loc 2 49 20 view .LVU276
 1150               	.LBB57:
  49:../../tmk_core/common/keyboard.h **** static inline bool IS_PRESSED(keyevent_t event) { return (!IS_NOEVENT(event) && event.pressed); }
 1151               		.loc 2 49 51 view .LVU277
  49:../../tmk_core/common/keyboard.h **** static inline bool IS_PRESSED(keyevent_t event) { return (!IS_NOEVENT(event) && event.pressed); }
 1152               		.loc 2 49 74 is_stmt 0 view .LVU278
 1153 002e 8A85      		ldd r24,Y+10
 1154 0030 9B85      		ldd r25,Y+11
 1155 0032 892B      		or r24,r25
 1156 0034 01F0      		breq .L135
 1157 0036 4F81      		ldd r20,Y+7
 1158 0038 5885      		ldd r21,Y+8
 1159 003a 842F      		mov r24,r20
 1160 003c 8523      		and r24,r21
 1161 003e 8F3F      		cpi r24,lo8(-1)
 1162 0040 01F0      		breq .+2
 1163 0042 00C0      		rjmp .L157
 1164               	.L135:
 1165               	.LBE57:
 1166               	.LBE56:
  59:../../tmk_core/common/action_tapping.c ****             debug("processed: waiting_buffer["); debug_dec(waiting_buffer_tail); debug("] = ");
 1167               		.loc 1 59 13 discriminator 1 view .LVU279
 1168 0044 16E0      		ldi r17,lo8(6)
 1169 0046 00C0      		rjmp .L142
 1170               	.L134:
  45:../../tmk_core/common/action_tapping.c ****             // clear all in case of overflow.
 1171               		.loc 1 45 9 is_stmt 1 view .LVU280
 1172 0048 86E0      		ldi r24,lo8(6)
 1173 004a FE01      		movw r30,r28
 1174 004c 3796      		adiw r30,7
 1175 004e DE01      		movw r26,r28
 1176 0050 1196      		adiw r26,1
 1177               		0:
 1178 0052 0190      		ld r0,Z+
 1179 0054 0D92      		st X+,r0
 1180 0056 8A95      		dec r24
 1181 0058 01F4      		brne 0b
 1182               	.LVL75:
  45:../../tmk_core/common/action_tapping.c ****             // clear all in case of overflow.
 1183               		.loc 1 45 9 is_stmt 0 view .LVU281
 1184 005a 6A85      		ldd r22,Y+10
 1185 005c 7B85      		ldd r23,Y+11
 1186               	.LVL76:
 1187               	.LBB58:
 1188               	.LBI58:
 292:../../tmk_core/common/action_tapping.c **** {
 1189               		.loc 1 292 6 is_stmt 1 view .LVU282
 1190               	.LBB59:
 294:../../tmk_core/common/action_tapping.c ****         return true;
 1191               		.loc 1 294 5 view .LVU283
 1192               	.LBB60:
 1193               	.LBI60:
  49:../../tmk_core/common/keyboard.h **** static inline bool IS_PRESSED(keyevent_t event) { return (!IS_NOEVENT(event) && event.pressed); }
 1194               		.loc 2 49 20 view .LVU284
 1195               	.LBB61:
  49:../../tmk_core/common/keyboard.h **** static inline bool IS_PRESSED(keyevent_t event) { return (!IS_NOEVENT(event) && event.pressed); }
 1196               		.loc 2 49 51 view .LVU285
  49:../../tmk_core/common/keyboard.h **** static inline bool IS_PRESSED(keyevent_t event) { return (!IS_NOEVENT(event) && event.pressed); }
 1197               		.loc 2 49 74 is_stmt 0 view .LVU286
 1198 005e 6115      		cp r22,__zero_reg__
 1199 0060 7105      		cpc r23,__zero_reg__
 1200 0062 01F0      		breq .L135
 1201 0064 5F81      		ldd r21,Y+7
 1202 0066 4885      		ldd r20,Y+8
 1203 0068 842F      		mov r24,r20
 1204 006a 8523      		and r24,r21
 1205 006c 8F3F      		cpi r24,lo8(-1)
 1206 006e 01F0      		breq .L135
 1207               	.LBE61:
 1208               	.LBE60:
 298:../../tmk_core/common/action_tapping.c ****         debug("waiting_buffer_enq: Over flow.\n");
 1209               		.loc 1 298 5 is_stmt 1 view .LVU287
 298:../../tmk_core/common/action_tapping.c ****         debug("waiting_buffer_enq: Over flow.\n");
 1210               		.loc 1 298 30 is_stmt 0 view .LVU288
 1211 0070 2091 0000 		lds r18,waiting_buffer_head
 1212 0074 30E0      		ldi r19,0
 1213 0076 C901      		movw r24,r18
 1214 0078 0196      		adiw r24,1
 298:../../tmk_core/common/action_tapping.c ****         debug("waiting_buffer_enq: Over flow.\n");
 1215               		.loc 1 298 35 view .LVU289
 1216 007a 8770      		andi r24,7
 1217 007c 9927      		clr r25
 298:../../tmk_core/common/action_tapping.c ****         debug("waiting_buffer_enq: Over flow.\n");
 1218               		.loc 1 298 57 view .LVU290
 1219 007e E091 0000 		lds r30,waiting_buffer_tail
 298:../../tmk_core/common/action_tapping.c ****         debug("waiting_buffer_enq: Over flow.\n");
 1220               		.loc 1 298 8 view .LVU291
 1221 0082 E817      		cp r30,r24
 1222 0084 1906      		cpc __zero_reg__,r25
 1223 0086 01F4      		brne .L159
 1224               	.LVL77:
 298:../../tmk_core/common/action_tapping.c ****         debug("waiting_buffer_enq: Over flow.\n");
 1225               		.loc 1 298 8 view .LVU292
 1226               	.LBE59:
 1227               	.LBE58:
 1228               	.LBB63:
  47:../../tmk_core/common/action_tapping.c ****             clear_keyboard();
 1229               		.loc 1 47 13 is_stmt 1 view .LVU293
  48:../../tmk_core/common/action_tapping.c ****             waiting_buffer_clear();
 1230               		.loc 1 48 13 view .LVU294
 1231 0088 0E94 0000 		call clear_keyboard
 1232               	.LVL78:
  49:../../tmk_core/common/action_tapping.c ****             tapping_key = (keyrecord_t){};
 1233               		.loc 1 49 13 view .LVU295
 1234               	.LBB64:
 1235               	.LBI64:
 310:../../tmk_core/common/action_tapping.c **** {
 1236               		.loc 1 310 6 view .LVU296
 1237               	.LBB65:
 312:../../tmk_core/common/action_tapping.c ****     waiting_buffer_tail = 0;
 1238               		.loc 1 312 5 view .LVU297
 312:../../tmk_core/common/action_tapping.c ****     waiting_buffer_tail = 0;
 1239               		.loc 1 312 25 is_stmt 0 view .LVU298
 1240 008c 1092 0000 		sts waiting_buffer_head,__zero_reg__
 313:../../tmk_core/common/action_tapping.c **** }
 1241               		.loc 1 313 5 is_stmt 1 view .LVU299
 313:../../tmk_core/common/action_tapping.c **** }
 1242               		.loc 1 313 25 is_stmt 0 view .LVU300
 1243 0090 1092 0000 		sts waiting_buffer_tail,__zero_reg__
 1244               	.LBE65:
 1245               	.LBE64:
  50:../../tmk_core/common/action_tapping.c ****         }
 1246               		.loc 1 50 13 is_stmt 1 view .LVU301
  50:../../tmk_core/common/action_tapping.c ****         }
 1247               		.loc 1 50 25 is_stmt 0 view .LVU302
 1248 0094 86E0      		ldi r24,lo8(6)
 1249 0096 E0E0      		ldi r30,lo8(tapping_key)
 1250 0098 F0E0      		ldi r31,hi8(tapping_key)
 1251 009a DF01      		movw r26,r30
 1252               		0:
 1253 009c 1D92      		st X+,__zero_reg__
 1254 009e 8A95      		dec r24
 1255 00a0 01F4      		brne 0b
 1256 00a2 00C0      		rjmp .L135
 1257               	.LVL79:
 1258               	.L159:
  50:../../tmk_core/common/action_tapping.c ****         }
 1259               		.loc 1 50 25 view .LVU303
 1260               	.LBE63:
 1261               	.LBB66:
 1262               	.LBB62:
 303:../../tmk_core/common/action_tapping.c ****     waiting_buffer_head = (waiting_buffer_head + 1) % WAITING_BUFFER_SIZE;
 1263               		.loc 1 303 5 is_stmt 1 view .LVU304
 303:../../tmk_core/common/action_tapping.c ****     waiting_buffer_head = (waiting_buffer_head + 1) % WAITING_BUFFER_SIZE;
 1264               		.loc 1 303 41 is_stmt 0 view .LVU305
 1265 00a4 5983      		std Y+1,r21
 1266 00a6 4A83      		std Y+2,r20
 1267 00a8 7D83      		std Y+5,r23
 1268 00aa 6C83      		std Y+4,r22
 1269 00ac 96E0      		ldi r25,lo8(6)
 1270 00ae 929F      		mul r25,r18
 1271 00b0 D001      		movw r26,r0
 1272 00b2 939F      		mul r25,r19
 1273 00b4 B00D      		add r27,r0
 1274 00b6 1124      		clr __zero_reg__
 1275 00b8 A050      		subi r26,lo8(-(waiting_buffer))
 1276 00ba B040      		sbci r27,hi8(-(waiting_buffer))
 1277 00bc FE01      		movw r30,r28
 1278 00be 3196      		adiw r30,1
 1279               		0:
 1280 00c0 0190      		ld r0,Z+
 1281 00c2 0D92      		st X+,r0
 1282 00c4 9A95      		dec r25
 1283 00c6 01F4      		brne 0b
 304:../../tmk_core/common/action_tapping.c **** 
 1284               		.loc 1 304 5 is_stmt 1 view .LVU306
 304:../../tmk_core/common/action_tapping.c **** 
 1285               		.loc 1 304 25 is_stmt 0 view .LVU307
 1286 00c8 8093 0000 		sts waiting_buffer_head,r24
 306:../../tmk_core/common/action_tapping.c ****     return true;
 1287               		.loc 1 306 5 is_stmt 1 view .LVU308
 306:../../tmk_core/common/action_tapping.c ****     return true;
 1288               		.loc 1 306 36 view .LVU309
 1289 00cc 0E94 0000 		call debug_waiting_buffer
 1290               	.LVL80:
 307:../../tmk_core/common/action_tapping.c **** }
 1291               		.loc 1 307 5 view .LVU310
 307:../../tmk_core/common/action_tapping.c **** }
 1292               		.loc 1 307 5 is_stmt 0 view .LVU311
 1293 00d0 00C0      		rjmp .L135
 1294               	.L140:
 307:../../tmk_core/common/action_tapping.c **** }
 1295               		.loc 1 307 5 view .LVU312
 1296               	.LBE62:
 1297               	.LBE66:
  59:../../tmk_core/common/action_tapping.c ****             debug("processed: waiting_buffer["); debug_dec(waiting_buffer_tail); debug("] = ");
 1298               		.loc 1 59 9 is_stmt 1 view .LVU313
  59:../../tmk_core/common/action_tapping.c ****             debug("processed: waiting_buffer["); debug_dec(waiting_buffer_tail); debug("] = ");
 1299               		.loc 1 59 13 is_stmt 0 view .LVU314
 1300 00d2 819F      		mul r24,r17
 1301 00d4 C001      		movw r24,r0
 1302 00d6 1124      		clr __zero_reg__
 1303 00d8 8050      		subi r24,lo8(-(waiting_buffer))
 1304 00da 9040      		sbci r25,hi8(-(waiting_buffer))
 1305 00dc 0E94 0000 		call process_tapping
 1306               	.LVL81:
  59:../../tmk_core/common/action_tapping.c ****             debug("processed: waiting_buffer["); debug_dec(waiting_buffer_tail); debug("] = ");
 1307               		.loc 1 59 12 view .LVU315
 1308 00e0 8823      		tst r24
 1309 00e2 01F0      		breq .L133
  60:../../tmk_core/common/action_tapping.c ****             debug_record(waiting_buffer[waiting_buffer_tail]); debug("\n\n");
 1310               		.loc 1 60 13 is_stmt 1 view .LVU316
  60:../../tmk_core/common/action_tapping.c ****             debug_record(waiting_buffer[waiting_buffer_tail]); debug("\n\n");
 1311               		.loc 1 60 50 view .LVU317
  60:../../tmk_core/common/action_tapping.c ****             debug_record(waiting_buffer[waiting_buffer_tail]); debug("\n\n");
 1312               		.loc 1 60 82 view .LVU318
  61:../../tmk_core/common/action_tapping.c ****         } else {
 1313               		.loc 1 61 13 view .LVU319
 1314 00e4 E091 0000 		lds r30,waiting_buffer_tail
 1315 00e8 1E9F      		mul r17,r30
 1316 00ea F001      		movw r30,r0
 1317 00ec 1124      		clr __zero_reg__
 1318 00ee E050      		subi r30,lo8(-(waiting_buffer))
 1319 00f0 F040      		sbci r31,hi8(-(waiting_buffer))
 1320 00f2 4081      		ld r20,Z
 1321 00f4 5181      		ldd r21,Z+1
 1322 00f6 6281      		ldd r22,Z+2
 1323 00f8 7381      		ldd r23,Z+3
 1324 00fa 8481      		ldd r24,Z+4
 1325 00fc 9581      		ldd r25,Z+5
 1326 00fe 0E94 0000 		call debug_record
 1327               	.LVL82:
  61:../../tmk_core/common/action_tapping.c ****         } else {
 1328               		.loc 1 61 64 view .LVU320
  58:../../tmk_core/common/action_tapping.c ****         if (process_tapping(&waiting_buffer[waiting_buffer_tail])) {
 1329               		.loc 1 58 56 view .LVU321
  58:../../tmk_core/common/action_tapping.c ****         if (process_tapping(&waiting_buffer[waiting_buffer_tail])) {
 1330               		.loc 1 58 99 is_stmt 0 view .LVU322
 1331 0102 8091 0000 		lds r24,waiting_buffer_tail
 1332 0106 90E0      		ldi r25,0
 1333 0108 0196      		adiw r24,1
  58:../../tmk_core/common/action_tapping.c ****         if (process_tapping(&waiting_buffer[waiting_buffer_tail])) {
 1334               		.loc 1 58 104 view .LVU323
 1335 010a 8770      		andi r24,7
 1336 010c 9927      		clr r25
  58:../../tmk_core/common/action_tapping.c ****         if (process_tapping(&waiting_buffer[waiting_buffer_tail])) {
 1337               		.loc 1 58 76 view .LVU324
 1338 010e 8093 0000 		sts waiting_buffer_tail,r24
 1339               	.L142:
  58:../../tmk_core/common/action_tapping.c ****         if (process_tapping(&waiting_buffer[waiting_buffer_tail])) {
 1340               		.loc 1 58 12 is_stmt 1 discriminator 1 view .LVU325
  58:../../tmk_core/common/action_tapping.c ****         if (process_tapping(&waiting_buffer[waiting_buffer_tail])) {
 1341               		.loc 1 58 32 is_stmt 0 discriminator 1 view .LVU326
 1342 0112 8091 0000 		lds r24,waiting_buffer_tail
  58:../../tmk_core/common/action_tapping.c ****         if (process_tapping(&waiting_buffer[waiting_buffer_tail])) {
 1343               		.loc 1 58 5 discriminator 1 view .LVU327
 1344 0116 9091 0000 		lds r25,waiting_buffer_head
 1345 011a 8913      		cpse r24,r25
 1346 011c 00C0      		rjmp .L140
 1347               	.L133:
 1348               	/* epilogue start */
  69:../../tmk_core/common/action_tapping.c **** 
 1349               		.loc 1 69 1 view .LVU328
 1350 011e 2C96      		adiw r28,12
 1351 0120 0FB6      		in __tmp_reg__,__SREG__
 1352 0122 F894      		cli
 1353 0124 DEBF      		out __SP_H__,r29
 1354 0126 0FBE      		out __SREG__,__tmp_reg__
 1355 0128 CDBF      		out __SP_L__,r28
 1356 012a DF91      		pop r29
 1357 012c CF91      		pop r28
 1358 012e 1F91      		pop r17
 1359 0130 0895      		ret
 1360               	.L157:
  42:../../tmk_core/common/action_tapping.c ****         }
 1361               		.loc 1 42 13 is_stmt 1 view .LVU329
  42:../../tmk_core/common/action_tapping.c ****         }
 1362               		.loc 1 42 35 view .LVU330
 1363 0132 6985      		ldd r22,Y+9
 1364 0134 7A85      		ldd r23,Y+10
 1365 0136 8B85      		ldd r24,Y+11
 1366 0138 9C85      		ldd r25,Y+12
 1367 013a 0E94 0000 		call debug_record
 1368               	.LVL83:
 1369 013e 00C0      		rjmp .L135
 1370               		.cfi_endproc
 1371               	.LFE4:
 1373               		.section	.bss.waiting_buffer_tail,"aw",@nobits
 1376               	waiting_buffer_tail:
 1377 0000 00        		.zero	1
 1378               		.section	.bss.waiting_buffer_head,"aw",@nobits
 1381               	waiting_buffer_head:
 1382 0000 00        		.zero	1
 1383               		.section	.bss.waiting_buffer,"aw",@nobits
 1386               	waiting_buffer:
 1387 0000 0000 0000 		.zero	48
 1387      0000 0000 
 1387      0000 0000 
 1387      0000 0000 
 1387      0000 0000 
 1388               		.section	.bss.tapping_key,"aw",@nobits
 1391               	tapping_key:
 1392 0000 0000 0000 		.zero	6
 1392      0000 
 1393               		.text
 1394               	.Letext0:
 1395               		.file 3 "/usr/avr/include/stdint.h"
 1396               		.file 4 "../../tmk_core/common/keycode.h"
 1397               		.file 5 "../../tmk_core/common/action_code.h"
 1398               		.file 6 "../../tmk_core/common/action.h"
 1399               		.file 7 "../../tmk_core/common/action_layer.h"
 1400               		.file 8 "../../tmk_core/common/timer.h"
 1401               		.file 9 "../../tmk_core/common/avr/xprintf.h"
 1402               		.file 10 "../../tmk_core/common/debug.h"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 action_tapping.c
     /tmp/cc3U2e8e.s:2      *ABS*:000000000000003e __SP_H__
     /tmp/cc3U2e8e.s:3      *ABS*:000000000000003d __SP_L__
     /tmp/cc3U2e8e.s:4      *ABS*:000000000000003f __SREG__
     /tmp/cc3U2e8e.s:5      *ABS*:0000000000000000 __tmp_reg__
     /tmp/cc3U2e8e.s:6      *ABS*:0000000000000001 __zero_reg__
     /tmp/cc3U2e8e.s:12     .text.debug_waiting_buffer:0000000000000000 debug_waiting_buffer
     /tmp/cc3U2e8e.s:1376   .bss.waiting_buffer_tail:0000000000000000 waiting_buffer_tail
     /tmp/cc3U2e8e.s:1381   .bss.waiting_buffer_head:0000000000000000 waiting_buffer_head
     /tmp/cc3U2e8e.s:1386   .bss.waiting_buffer:0000000000000000 waiting_buffer
     /tmp/cc3U2e8e.s:95     .text.debug_tapping_key:0000000000000000 debug_tapping_key
     /tmp/cc3U2e8e.s:1391   .bss.tapping_key:0000000000000000 tapping_key
     /tmp/cc3U2e8e.s:118    .text.waiting_buffer_scan_tap:0000000000000000 waiting_buffer_scan_tap
     /tmp/cc3U2e8e.s:299    .text.process_tapping:0000000000000000 process_tapping
     /tmp/cc3U2e8e.s:1099   .text.action_tapping_process:0000000000000000 action_tapping_process

UNDEFINED SYMBOLS
debug_record
process_action
layer_switch_get_action
is_tap_key
debug_event
clear_keyboard
__do_clear_bss
