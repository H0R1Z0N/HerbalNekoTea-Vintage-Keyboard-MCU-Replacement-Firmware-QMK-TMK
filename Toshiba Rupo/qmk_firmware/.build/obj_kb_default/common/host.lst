   1               		.file	"host.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__RAMPZ__ = 0x3b
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.text
   9               	.Ltext0:
  10               		.cfi_sections	.debug_frame
  11               		.section	.text.host_set_driver,"ax",@progbits
  12               	.global	host_set_driver
  14               	host_set_driver:
  15               	.LVL0:
  16               	.LFB100:
  17               		.file 1 "./tmk_core/common/host.c"
   1:./tmk_core/common/host.c **** /*
   2:./tmk_core/common/host.c **** Copyright 2011,2012 Jun Wako <wakojun@gmail.com>
   3:./tmk_core/common/host.c **** 
   4:./tmk_core/common/host.c **** This program is free software: you can redistribute it and/or modify
   5:./tmk_core/common/host.c **** it under the terms of the GNU General Public License as published by
   6:./tmk_core/common/host.c **** the Free Software Foundation, either version 2 of the License, or
   7:./tmk_core/common/host.c **** (at your option) any later version.
   8:./tmk_core/common/host.c **** 
   9:./tmk_core/common/host.c **** This program is distributed in the hope that it will be useful,
  10:./tmk_core/common/host.c **** but WITHOUT ANY WARRANTY; without even the implied warranty of
  11:./tmk_core/common/host.c **** MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  12:./tmk_core/common/host.c **** GNU General Public License for more details.
  13:./tmk_core/common/host.c **** 
  14:./tmk_core/common/host.c **** You should have received a copy of the GNU General Public License
  15:./tmk_core/common/host.c **** along with this program.  If not, see <http://www.gnu.org/licenses/>.
  16:./tmk_core/common/host.c **** */
  17:./tmk_core/common/host.c **** 
  18:./tmk_core/common/host.c **** #include <stdint.h>
  19:./tmk_core/common/host.c **** //#include <avr/interrupt.h>
  20:./tmk_core/common/host.c **** #include "keycode.h"
  21:./tmk_core/common/host.c **** #include "host.h"
  22:./tmk_core/common/host.c **** #include "util.h"
  23:./tmk_core/common/host.c **** #include "debug.h"
  24:./tmk_core/common/host.c **** 
  25:./tmk_core/common/host.c **** static host_driver_t *driver;
  26:./tmk_core/common/host.c **** static uint16_t last_system_report = 0;
  27:./tmk_core/common/host.c **** static uint16_t last_consumer_report = 0;
  28:./tmk_core/common/host.c **** 
  29:./tmk_core/common/host.c **** 
  30:./tmk_core/common/host.c **** void host_set_driver(host_driver_t *d)
  31:./tmk_core/common/host.c **** {
  18               		.loc 1 31 1 view -0
  19               		.cfi_startproc
  20               	/* prologue: function */
  21               	/* frame size = 0 */
  22               	/* stack size = 0 */
  23               	.L__stack_usage = 0
  32:./tmk_core/common/host.c ****     driver = d;
  24               		.loc 1 32 5 view .LVU1
  25               		.loc 1 32 12 is_stmt 0 view .LVU2
  26 0000 9093 0000 		sts driver+1,r25
  27 0004 8093 0000 		sts driver,r24
  28               	/* epilogue start */
  33:./tmk_core/common/host.c **** }
  29               		.loc 1 33 1 view .LVU3
  30 0008 0895      		ret
  31               		.cfi_endproc
  32               	.LFE100:
  34               		.section	.text.host_get_driver,"ax",@progbits
  35               	.global	host_get_driver
  37               	host_get_driver:
  38               	.LFB101:
  34:./tmk_core/common/host.c **** 
  35:./tmk_core/common/host.c **** host_driver_t *host_get_driver(void)
  36:./tmk_core/common/host.c **** {
  39               		.loc 1 36 1 is_stmt 1 view -0
  40               		.cfi_startproc
  41               	/* prologue: function */
  42               	/* frame size = 0 */
  43               	/* stack size = 0 */
  44               	.L__stack_usage = 0
  37:./tmk_core/common/host.c ****     return driver;
  45               		.loc 1 37 5 view .LVU5
  38:./tmk_core/common/host.c **** }
  46               		.loc 1 38 1 is_stmt 0 view .LVU6
  47 0000 8091 0000 		lds r24,driver
  48 0004 9091 0000 		lds r25,driver+1
  49               	/* epilogue start */
  50 0008 0895      		ret
  51               		.cfi_endproc
  52               	.LFE101:
  54               		.section	.text.host_keyboard_leds,"ax",@progbits
  55               	.global	host_keyboard_leds
  57               	host_keyboard_leds:
  58               	.LFB102:
  39:./tmk_core/common/host.c **** 
  40:./tmk_core/common/host.c **** uint8_t host_keyboard_leds(void)
  41:./tmk_core/common/host.c **** {
  59               		.loc 1 41 1 is_stmt 1 view -0
  60               		.cfi_startproc
  61               	/* prologue: function */
  62               	/* frame size = 0 */
  63               	/* stack size = 0 */
  64               	.L__stack_usage = 0
  42:./tmk_core/common/host.c ****     if (!driver) return 0;
  65               		.loc 1 42 5 view .LVU8
  66               		.loc 1 42 9 is_stmt 0 view .LVU9
  67 0000 E091 0000 		lds r30,driver
  68 0004 F091 0000 		lds r31,driver+1
  69               		.loc 1 42 8 view .LVU10
  70 0008 3097      		sbiw r30,0
  71 000a 01F0      		breq .L4
  43:./tmk_core/common/host.c ****     return (*driver->keyboard_leds)();
  72               		.loc 1 43 5 is_stmt 1 view .LVU11
  73               		.loc 1 43 13 is_stmt 0 view .LVU12
  74 000c 0190      		ld __tmp_reg__,Z+
  75 000e F081      		ld r31,Z
  76 0010 E02D      		mov r30,__tmp_reg__
  77 0012 0994      		ijmp
  78               	.LVL1:
  79               	.L4:
  44:./tmk_core/common/host.c **** }
  80               		.loc 1 44 1 view .LVU13
  81 0014 80E0      		ldi r24,0
  82               	/* epilogue start */
  83 0016 0895      		ret
  84               		.cfi_endproc
  85               	.LFE102:
  87               		.section	.text.host_keyboard_send,"ax",@progbits
  88               	.global	host_keyboard_send
  90               	host_keyboard_send:
  91               	.LVL2:
  92               	.LFB103:
  45:./tmk_core/common/host.c **** /* send report */
  46:./tmk_core/common/host.c **** void host_keyboard_send(report_keyboard_t *report)
  47:./tmk_core/common/host.c **** {
  93               		.loc 1 47 1 is_stmt 1 view -0
  94               		.cfi_startproc
  95               	/* prologue: function */
  96               	/* frame size = 0 */
  97               	/* stack size = 0 */
  98               	.L__stack_usage = 0
  48:./tmk_core/common/host.c ****     if (!driver) return;
  99               		.loc 1 48 5 view .LVU15
 100               		.loc 1 48 9 is_stmt 0 view .LVU16
 101 0000 E091 0000 		lds r30,driver
 102 0004 F091 0000 		lds r31,driver+1
 103               		.loc 1 48 8 view .LVU17
 104 0008 3097      		sbiw r30,0
 105 000a 01F0      		breq .L5
  49:./tmk_core/common/host.c ****     (*driver->send_keyboard)(report);
 106               		.loc 1 49 5 is_stmt 1 view .LVU18
 107               		.loc 1 49 6 is_stmt 0 view .LVU19
 108 000c 0280      		ldd __tmp_reg__,Z+2
 109 000e F381      		ldd r31,Z+3
 110 0010 E02D      		mov r30,__tmp_reg__
 111 0012 0994      		ijmp
 112               	.LVL3:
 113               	.L5:
 114               	/* epilogue start */
  50:./tmk_core/common/host.c **** 
  51:./tmk_core/common/host.c ****     if (debug_keyboard) {
  52:./tmk_core/common/host.c ****         dprint("keyboard_report: ");
  53:./tmk_core/common/host.c ****         for (uint8_t i = 0; i < KEYBOARD_REPORT_SIZE; i++) {
  54:./tmk_core/common/host.c ****             dprintf("%02X ", report->raw[i]);
  55:./tmk_core/common/host.c ****         }
  56:./tmk_core/common/host.c ****         dprint("\n");
  57:./tmk_core/common/host.c ****     }
  58:./tmk_core/common/host.c **** }
 115               		.loc 1 58 1 view .LVU20
 116 0014 0895      		ret
 117               		.cfi_endproc
 118               	.LFE103:
 120               		.section	.text.host_mouse_send,"ax",@progbits
 121               	.global	host_mouse_send
 123               	host_mouse_send:
 124               	.LVL4:
 125               	.LFB104:
  59:./tmk_core/common/host.c **** 
  60:./tmk_core/common/host.c **** void host_mouse_send(report_mouse_t *report)
  61:./tmk_core/common/host.c **** {
 126               		.loc 1 61 1 is_stmt 1 view -0
 127               		.cfi_startproc
 128               	/* prologue: function */
 129               	/* frame size = 0 */
 130               	/* stack size = 0 */
 131               	.L__stack_usage = 0
  62:./tmk_core/common/host.c ****     if (!driver) return;
 132               		.loc 1 62 5 view .LVU22
 133               		.loc 1 62 9 is_stmt 0 view .LVU23
 134 0000 E091 0000 		lds r30,driver
 135 0004 F091 0000 		lds r31,driver+1
 136               		.loc 1 62 8 view .LVU24
 137 0008 3097      		sbiw r30,0
 138 000a 01F0      		breq .L7
  63:./tmk_core/common/host.c ****     (*driver->send_mouse)(report);
 139               		.loc 1 63 5 is_stmt 1 view .LVU25
 140               		.loc 1 63 6 is_stmt 0 view .LVU26
 141 000c 0480      		ldd __tmp_reg__,Z+4
 142 000e F581      		ldd r31,Z+5
 143 0010 E02D      		mov r30,__tmp_reg__
 144 0012 0994      		ijmp
 145               	.LVL5:
 146               	.L7:
 147               	/* epilogue start */
  64:./tmk_core/common/host.c **** }
 148               		.loc 1 64 1 view .LVU27
 149 0014 0895      		ret
 150               		.cfi_endproc
 151               	.LFE104:
 153               		.section	.text.host_system_send,"ax",@progbits
 154               	.global	host_system_send
 156               	host_system_send:
 157               	.LVL6:
 158               	.LFB105:
  65:./tmk_core/common/host.c **** 
  66:./tmk_core/common/host.c **** void host_system_send(uint16_t report)
  67:./tmk_core/common/host.c **** {
 159               		.loc 1 67 1 is_stmt 1 view -0
 160               		.cfi_startproc
 161               	/* prologue: function */
 162               	/* frame size = 0 */
 163               	/* stack size = 0 */
 164               	.L__stack_usage = 0
  68:./tmk_core/common/host.c ****     if (report == last_system_report) return;
 165               		.loc 1 68 5 view .LVU29
 166               		.loc 1 68 8 is_stmt 0 view .LVU30
 167 0000 2091 0000 		lds r18,last_system_report
 168 0004 3091 0000 		lds r19,last_system_report+1
 169 0008 2817      		cp r18,r24
 170 000a 3907      		cpc r19,r25
 171 000c 01F0      		breq .L9
  69:./tmk_core/common/host.c ****     last_system_report = report;
 172               		.loc 1 69 5 is_stmt 1 view .LVU31
 173               		.loc 1 69 24 is_stmt 0 view .LVU32
 174 000e 9093 0000 		sts last_system_report+1,r25
 175 0012 8093 0000 		sts last_system_report,r24
  70:./tmk_core/common/host.c **** 
  71:./tmk_core/common/host.c ****     if (!driver) return;
 176               		.loc 1 71 5 is_stmt 1 view .LVU33
 177               		.loc 1 71 9 is_stmt 0 view .LVU34
 178 0016 E091 0000 		lds r30,driver
 179 001a F091 0000 		lds r31,driver+1
 180               		.loc 1 71 8 view .LVU35
 181 001e 3097      		sbiw r30,0
 182 0020 01F0      		breq .L9
  72:./tmk_core/common/host.c ****     (*driver->send_system)(report);
 183               		.loc 1 72 5 is_stmt 1 view .LVU36
 184               		.loc 1 72 6 is_stmt 0 view .LVU37
 185 0022 0680      		ldd __tmp_reg__,Z+6
 186 0024 F781      		ldd r31,Z+7
 187 0026 E02D      		mov r30,__tmp_reg__
 188 0028 0994      		ijmp
 189               	.LVL7:
 190               	.L9:
 191               	/* epilogue start */
  73:./tmk_core/common/host.c **** }
 192               		.loc 1 73 1 view .LVU38
 193 002a 0895      		ret
 194               		.cfi_endproc
 195               	.LFE105:
 197               		.section	.text.host_consumer_send,"ax",@progbits
 198               	.global	host_consumer_send
 200               	host_consumer_send:
 201               	.LVL8:
 202               	.LFB106:
  74:./tmk_core/common/host.c **** 
  75:./tmk_core/common/host.c **** void host_consumer_send(uint16_t report)
  76:./tmk_core/common/host.c **** {
 203               		.loc 1 76 1 is_stmt 1 view -0
 204               		.cfi_startproc
 205               	/* prologue: function */
 206               	/* frame size = 0 */
 207               	/* stack size = 0 */
 208               	.L__stack_usage = 0
  77:./tmk_core/common/host.c ****     if (report == last_consumer_report) return;
 209               		.loc 1 77 5 view .LVU40
 210               		.loc 1 77 8 is_stmt 0 view .LVU41
 211 0000 2091 0000 		lds r18,last_consumer_report
 212 0004 3091 0000 		lds r19,last_consumer_report+1
 213 0008 2817      		cp r18,r24
 214 000a 3907      		cpc r19,r25
 215 000c 01F0      		breq .L16
  78:./tmk_core/common/host.c ****     last_consumer_report = report;
 216               		.loc 1 78 5 is_stmt 1 view .LVU42
 217               		.loc 1 78 26 is_stmt 0 view .LVU43
 218 000e 9093 0000 		sts last_consumer_report+1,r25
 219 0012 8093 0000 		sts last_consumer_report,r24
  79:./tmk_core/common/host.c **** 
  80:./tmk_core/common/host.c ****     if (!driver) return;
 220               		.loc 1 80 5 is_stmt 1 view .LVU44
 221               		.loc 1 80 9 is_stmt 0 view .LVU45
 222 0016 E091 0000 		lds r30,driver
 223 001a F091 0000 		lds r31,driver+1
 224               		.loc 1 80 8 view .LVU46
 225 001e 3097      		sbiw r30,0
 226 0020 01F0      		breq .L16
  81:./tmk_core/common/host.c ****     (*driver->send_consumer)(report);
 227               		.loc 1 81 5 is_stmt 1 view .LVU47
 228               		.loc 1 81 6 is_stmt 0 view .LVU48
 229 0022 0084      		ldd __tmp_reg__,Z+8
 230 0024 F185      		ldd r31,Z+9
 231 0026 E02D      		mov r30,__tmp_reg__
 232 0028 0994      		ijmp
 233               	.LVL9:
 234               	.L16:
 235               	/* epilogue start */
  82:./tmk_core/common/host.c **** }
 236               		.loc 1 82 1 view .LVU49
 237 002a 0895      		ret
 238               		.cfi_endproc
 239               	.LFE106:
 241               		.section	.text.host_last_system_report,"ax",@progbits
 242               	.global	host_last_system_report
 244               	host_last_system_report:
 245               	.LFB107:
  83:./tmk_core/common/host.c **** 
  84:./tmk_core/common/host.c **** uint16_t host_last_system_report(void)
  85:./tmk_core/common/host.c **** {
 246               		.loc 1 85 1 is_stmt 1 view -0
 247               		.cfi_startproc
 248               	/* prologue: function */
 249               	/* frame size = 0 */
 250               	/* stack size = 0 */
 251               	.L__stack_usage = 0
  86:./tmk_core/common/host.c ****     return last_system_report;
 252               		.loc 1 86 5 view .LVU51
  87:./tmk_core/common/host.c **** }
 253               		.loc 1 87 1 is_stmt 0 view .LVU52
 254 0000 8091 0000 		lds r24,last_system_report
 255 0004 9091 0000 		lds r25,last_system_report+1
 256               	/* epilogue start */
 257 0008 0895      		ret
 258               		.cfi_endproc
 259               	.LFE107:
 261               		.section	.text.host_last_consumer_report,"ax",@progbits
 262               	.global	host_last_consumer_report
 264               	host_last_consumer_report:
 265               	.LFB108:
  88:./tmk_core/common/host.c **** 
  89:./tmk_core/common/host.c **** uint16_t host_last_consumer_report(void)
  90:./tmk_core/common/host.c **** {
 266               		.loc 1 90 1 is_stmt 1 view -0
 267               		.cfi_startproc
 268               	/* prologue: function */
 269               	/* frame size = 0 */
 270               	/* stack size = 0 */
 271               	.L__stack_usage = 0
  91:./tmk_core/common/host.c ****     return last_consumer_report;
 272               		.loc 1 91 5 view .LVU54
  92:./tmk_core/common/host.c **** }
 273               		.loc 1 92 1 is_stmt 0 view .LVU55
 274 0000 8091 0000 		lds r24,last_consumer_report
 275 0004 9091 0000 		lds r25,last_consumer_report+1
 276               	/* epilogue start */
 277 0008 0895      		ret
 278               		.cfi_endproc
 279               	.LFE108:
 281               		.section	.bss.last_consumer_report,"aw",@nobits
 284               	last_consumer_report:
 285 0000 0000      		.zero	2
 286               		.section	.bss.last_system_report,"aw",@nobits
 289               	last_system_report:
 290 0000 0000      		.zero	2
 291               		.section	.bss.driver,"aw",@nobits
 294               	driver:
 295 0000 0000      		.zero	2
 296               		.text
 297               	.Letext0:
 298               		.file 2 "/usr/avr/include/stdint.h"
 299               		.file 3 "./tmk_core/common/report.h"
 300               		.file 4 "./tmk_core/common/host_driver.h"
 301               		.file 5 "./tmk_core/common/debug.h"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 host.c
     /tmp/ccuwEUJI.s:2      *ABS*:000000000000003e __SP_H__
     /tmp/ccuwEUJI.s:3      *ABS*:000000000000003d __SP_L__
     /tmp/ccuwEUJI.s:4      *ABS*:000000000000003f __SREG__
     /tmp/ccuwEUJI.s:5      *ABS*:000000000000003b __RAMPZ__
     /tmp/ccuwEUJI.s:6      *ABS*:0000000000000000 __tmp_reg__
     /tmp/ccuwEUJI.s:7      *ABS*:0000000000000001 __zero_reg__
     /tmp/ccuwEUJI.s:14     .text.host_set_driver:0000000000000000 host_set_driver
     /tmp/ccuwEUJI.s:294    .bss.driver:0000000000000000 driver
     /tmp/ccuwEUJI.s:37     .text.host_get_driver:0000000000000000 host_get_driver
     /tmp/ccuwEUJI.s:57     .text.host_keyboard_leds:0000000000000000 host_keyboard_leds
     /tmp/ccuwEUJI.s:90     .text.host_keyboard_send:0000000000000000 host_keyboard_send
     /tmp/ccuwEUJI.s:123    .text.host_mouse_send:0000000000000000 host_mouse_send
     /tmp/ccuwEUJI.s:156    .text.host_system_send:0000000000000000 host_system_send
     /tmp/ccuwEUJI.s:289    .bss.last_system_report:0000000000000000 last_system_report
     /tmp/ccuwEUJI.s:200    .text.host_consumer_send:0000000000000000 host_consumer_send
     /tmp/ccuwEUJI.s:284    .bss.last_consumer_report:0000000000000000 last_consumer_report
     /tmp/ccuwEUJI.s:244    .text.host_last_system_report:0000000000000000 host_last_system_report
     /tmp/ccuwEUJI.s:264    .text.host_last_consumer_report:0000000000000000 host_last_consumer_report

UNDEFINED SYMBOLS
__do_clear_bss
